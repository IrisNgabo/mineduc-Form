"use strict";exports.id=5401,exports.ids=[5401],exports.modules={3018:(e,a,r)=>{r.d(a,{Fc:()=>i,TN:()=>o});var t=r(60687);r(43210);var s=r(24224),l=r(96241);let n=(0,s.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i({className:e,variant:a,...r}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,l.cn)(n({variant:a}),e),...r})}function o({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,l.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...a})}},39390:(e,a,r)=>{r.d(a,{J:()=>i});var t=r(60687),s=r(43210),l=r(78148),n=r(96241);let i=s.forwardRef(({className:e,...a},r)=>(0,t.jsx)(l.b,{ref:r,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...a}));i.displayName=l.b.displayName},40083:(e,a,r)=>{r.d(a,{A:()=>t});let t=(0,r(62688).A)("log-out",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},41550:(e,a,r)=>{r.d(a,{A:()=>t});let t=(0,r(62688).A)("mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},55192:(e,a,r)=>{r.d(a,{BT:()=>o,Wu:()=>d,ZB:()=>i,Zp:()=>l,aR:()=>n});var t=r(60687);r(43210);var s=r(96241);function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...a})}function o({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}function d({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...a})}},58164:(e,a,r)=>{r.d(a,{C5:()=>h,MJ:()=>p,eI:()=>f,lR:()=>g,lV:()=>d,zB:()=>m});var t=r(60687),s=r(43210),l=r(8730),n=r(27605),i=r(96241),o=r(39390);let d=n.Op,c=s.createContext({}),m=({...e})=>(0,t.jsx)(c.Provider,{value:{name:e.name},children:(0,t.jsx)(n.xI,{...e})}),u=()=>{let e=s.useContext(c),a=s.useContext(x),{getFieldState:r}=(0,n.xW)(),t=(0,n.lN)({name:e.name}),l=r(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=a;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...l}},x=s.createContext({});function f({className:e,...a}){let r=s.useId();return(0,t.jsx)(x.Provider,{value:{id:r},children:(0,t.jsx)("div",{"data-slot":"form-item",className:(0,i.cn)("grid gap-2",e),...a})})}function g({className:e,...a}){let{error:r,formItemId:s}=u();return(0,t.jsx)(o.J,{"data-slot":"form-label","data-error":!!r,className:(0,i.cn)("data-[error=true]:text-destructive",e),htmlFor:s,...a})}function p({...e}){let{error:a,formItemId:r,formDescriptionId:s,formMessageId:n}=u();return(0,t.jsx)(l.DX,{"data-slot":"form-control",id:r,"aria-describedby":a?`${s} ${n}`:`${s}`,"aria-invalid":!!a,...e})}function h({className:e,...a}){let{error:r,formMessageId:s}=u(),l=r?String(r?.message??""):a.children;return l?(0,t.jsx)("p",{"data-slot":"form-message",id:s,className:(0,i.cn)("text-destructive text-sm",e),...a,children:l}):null}},58869:(e,a,r)=>{r.d(a,{A:()=>t});let t=(0,r(62688).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},60210:(e,a,r)=>{r.d(a,{A:()=>b});var t=r(60687),s=r(43210),l=r(45880),n=r(27605),i=r(63442),o=r(58164),d=r(68988),c=r(62688);let m=(0,c.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var u=r(58869),x=r(41550);let f=(0,c.A)("at-sign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]),g=(0,c.A)("phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);var p=r(85778),h=r(63974),j=r(3018),v=r(16189),y=r(60796);let N=l.z.object({firstName:l.z.string().min(1,"First name is required"),lastName:l.z.string().min(1,"Last name is required"),email:l.z.string().email("Invalid email address"),phonenumber:l.z.string().min(10,"Phone number must be at least 10 digits"),username:l.z.string().min(1,"Username is required"),gender:l.z.enum(["MALE","FEMALE","OTHER"]),national_id:l.z.string().min(1,"National ID is required"),roles:l.z.array(l.z.object({role_name:l.z.string()})).optional()}),b=()=>{let[e,a]=(0,s.useState)(!0),[r,l]=(0,s.useState)(null),[c,b]=(0,s.useState)(!1),[w,F]=(0,s.useState)(!1),[A,B]=(0,s.useState)(null),z=(0,v.useRouter)(),I=(0,n.mN)({resolver:(0,i.u)(N),defaultValues:{firstName:"",lastName:"",email:"",phonenumber:"",username:"",gender:"MALE",national_id:""}});async function k(e){try{if(b(!0),F(!1),!localStorage.getItem("token")){l("You are not authenticated. Please log in."),b(!1);return}console.log("Updated profile values:",e),await new Promise(e=>setTimeout(e,1e3)),F(!0)}catch(e){console.error("Error saving profile:",e),l("Failed to save profile changes. Please try again.")}finally{b(!1)}}return((0,s.useEffect)(()=>{(async()=>{try{a(!0),console.log("Fetching profile data...");let e=localStorage.getItem("access");if(console.log("Token from localStorage:",e?"Found":"Not found"),!e){l("You are not authenticated. Please log in."),a(!1);return}console.log("Making API request to fetch profile...");let r=await fetch(`${y.f}/auth/get-profile`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(console.log("API response status:",r.status),401===r.status){console.error("Authentication failed: 401 Unauthorized"),l("Your session has expired. Please log in again.");return}if(!r.ok)throw Error(`Failed to fetch profile: ${r.status}`);let t=await r.json();console.log("Profile data received:",t),B(t),I.reset({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",phonenumber:t.phonenumber||"",username:t.username||"",gender:t.gender||"MALE",national_id:t.national_id||""}),l(null)}catch(e){console.error("Error fetching profile:",e),l("Failed to load profile data. Please try again later.")}finally{a(!1)}})()},[I]),e)?(0,t.jsxs)("div",{className:"flex justify-center items-center h-96",children:[(0,t.jsx)(m,{className:"h-8 w-8 text-[#026FB4] animate-spin"}),(0,t.jsx)("span",{className:"ml-2 text-lg",children:"Loading profile..."})]}):(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden max-w-5xl mx-auto",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[#026FB4]"}),(0,t.jsx)("div",{className:"relative h-48",children:(0,t.jsx)("div",{className:"absolute -bottom-16 left-1/2 transform -translate-x-1/2",children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"relative group",children:(0,t.jsx)("div",{className:"w-32 h-32 rounded-full bg-white p-2 shadow-xl transform transition-transform duration-300 group-hover:scale-105",children:(0,t.jsx)("div",{className:"w-full h-full rounded-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:(0,t.jsx)(u.A,{className:"h-20 w-20 text-[#026FB4]"})})})}),(0,t.jsxs)("div",{className:"flex flex-col items-center mt-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-white",children:A&&`${A.firstName} ${A.lastName}`}),(0,t.jsx)("h2",{className:"text-gray-200 bg-[#026FB4]/90 px-3 py-1 rounded-full text-sm font-medium mt-1",children:A&&A.roles&&A.roles.length>0?A.roles[0].role_name:"User"})]})]})})})]}),(0,t.jsxs)("div",{className:"mt-20 px-8 pb-8",children:[r&&(0,t.jsx)(j.Fc,{variant:"destructive",className:"mb-6",children:(0,t.jsxs)(j.TN,{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{children:r}),(r.includes("not authenticated")||r.includes("expired"))&&(0,t.jsx)("button",{onClick:()=>z.push("/login"),className:"bg-red-100 text-red-800 px-3 py-1 rounded-md text-sm font-medium hover:bg-red-200",children:"Go to Login"})]})}),w&&(0,t.jsx)(j.Fc,{className:"mb-6 bg-green-50 border-green-200",children:(0,t.jsx)(j.TN,{className:"text-green-700",children:"Profile updated successfully!"})}),(0,t.jsx)(o.lV,{...I,children:(0,t.jsxs)("form",{onSubmit:I.handleSubmit(k),className:"space-y-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(o.zB,{control:I.control,name:"firstName",render:({field:e})=>(0,t.jsxs)(o.eI,{children:[(0,t.jsx)(o.lR,{className:"font-medium text-gray-700",children:"First Name"}),(0,t.jsx)(o.MJ,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,t.jsx)(d.p,{placeholder:"First name",...e,className:"pl-10 bg-gray-50 border-gray-200 focus:border-[#026FB4] focus:ring-1 focus:ring-[#026FB4]"})]})}),(0,t.jsx)(o.C5,{className:"text-red-500 text-sm"})]})}),(0,t.jsx)(o.zB,{control:I.control,name:"email",render:({field:e})=>(0,t.jsxs)(o.eI,{children:[(0,t.jsx)(o.lR,{className:"font-medium text-gray-700",children:"Email"}),(0,t.jsx)(o.MJ,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,t.jsx)(d.p,{placeholder:"Email",type:"email",...e,className:"pl-10 bg-gray-50 border-gray-200 focus:border-[#026FB4] focus:ring-1 focus:ring-[#026FB4]"})]})}),(0,t.jsx)(o.C5,{className:"text-red-500 text-sm"})]})}),(0,t.jsx)(o.zB,{control:I.control,name:"username",render:({field:e})=>(0,t.jsxs)(o.eI,{children:[(0,t.jsx)(o.lR,{className:"font-medium text-gray-700",children:"Username"}),(0,t.jsx)(o.MJ,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,t.jsx)(d.p,{placeholder:"Username",...e,className:"pl-10 bg-gray-50 border-gray-200 focus:border-[#026FB4] focus:ring-1 focus:ring-[#026FB4]"})]})}),(0,t.jsx)(o.C5,{className:"text-red-500 text-sm"})]})}),(0,t.jsx)(o.zB,{control:I.control,name:"gender",render:({field:e})=>(0,t.jsxs)(o.eI,{children:[(0,t.jsx)(o.lR,{className:"font-medium text-gray-700",children:"Gender"}),(0,t.jsxs)(h.l6,{onValueChange:e.onChange,defaultValue:e.value,value:e.value,children:[(0,t.jsx)(o.MJ,{children:(0,t.jsx)(h.bq,{className:"bg-gray-50 border-gray-200 focus:border-[#026FB4] focus:ring-1 focus:ring-[#026FB4]",children:(0,t.jsx)(h.yv,{placeholder:"Select gender"})})}),(0,t.jsxs)(h.gC,{children:[(0,t.jsx)(h.eb,{value:"MALE",children:"Male"}),(0,t.jsx)(h.eb,{value:"FEMALE",children:"Female"}),(0,t.jsx)(h.eb,{value:"OTHER",children:"Other"})]})]}),(0,t.jsx)(o.C5,{className:"text-red-500 text-sm"})]})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(o.zB,{control:I.control,name:"lastName",render:({field:e})=>(0,t.jsxs)(o.eI,{children:[(0,t.jsx)(o.lR,{className:"font-medium text-gray-700",children:"Last Name"}),(0,t.jsx)(o.MJ,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(u.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,t.jsx)(d.p,{placeholder:"Last name",...e,className:"pl-10 bg-gray-50 border-gray-200 focus:border-[#026FB4] focus:ring-1 focus:ring-[#026FB4]"})]})}),(0,t.jsx)(o.C5,{className:"text-red-500 text-sm"})]})}),(0,t.jsx)(o.zB,{control:I.control,name:"phonenumber",render:({field:e})=>(0,t.jsxs)(o.eI,{children:[(0,t.jsx)(o.lR,{className:"font-medium text-gray-700",children:"Phone Number"}),(0,t.jsx)(o.MJ,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,t.jsx)(d.p,{placeholder:"Phone number",type:"tel",...e,className:"pl-10 bg-gray-50 border-gray-200 focus:border-[#026FB4] focus:ring-1 focus:ring-[#026FB4]"})]})}),(0,t.jsx)(o.C5,{className:"text-red-500 text-sm"})]})}),(0,t.jsx)(o.zB,{control:I.control,name:"national_id",render:({field:e})=>(0,t.jsxs)(o.eI,{children:[(0,t.jsx)(o.lR,{className:"font-medium text-gray-700",children:"National ID"}),(0,t.jsx)(o.MJ,{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(p.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,t.jsx)(d.p,{placeholder:"National ID",...e,className:"pl-10 bg-gray-50 border-gray-200 focus:border-[#026FB4] focus:ring-1 focus:ring-[#026FB4]"})]})}),(0,t.jsx)(o.C5,{className:"text-red-500 text-sm"})]})})]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4",children:(0,t.jsx)("button",{type:"submit",disabled:c,className:"bg-[#026FB4] hover:bg-[#026FB4]/90 text-white font-medium py-3 px-8 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl disabled:opacity-70 disabled:cursor-not-allowed flex items-center",children:c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})})]})})]})]})}},60796:(e,a,r)=>{r.d(a,{f:()=>t});let t="https://api.rwandafutureskillsforum.rtbdev.online"},63974:(e,a,r)=>{r.d(a,{bq:()=>u,eb:()=>p,gC:()=>g,l6:()=>c,yv:()=>m});var t=r(60687),s=r(43210),l=r(22670),n=r(78272),i=r(3589),o=r(13964),d=r(96241);let c=l.bL;l.YJ;let m=l.WT,u=s.forwardRef(({className:e,children:a,...r},s)=>(0,t.jsxs)(l.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[a,(0,t.jsx)(l.In,{asChild:!0,children:(0,t.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=l.l9.displayName;let x=s.forwardRef(({className:e,...a},r)=>(0,t.jsx)(l.PP,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:(0,t.jsx)(i.A,{className:"h-4 w-4"})}));x.displayName=l.PP.displayName;let f=s.forwardRef(({className:e,...a},r)=>(0,t.jsx)(l.wn,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})}));f.displayName=l.wn.displayName;let g=s.forwardRef(({className:e,children:a,position:r="popper",...s},n)=>(0,t.jsx)(l.ZL,{children:(0,t.jsxs)(l.UC,{ref:n,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[(0,t.jsx)(x,{}),(0,t.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,t.jsx)(f,{})]})}));g.displayName=l.UC.displayName,s.forwardRef(({className:e,...a},r)=>(0,t.jsx)(l.JU,{ref:r,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=l.JU.displayName;let p=s.forwardRef(({className:e,children:a,...r},s)=>(0,t.jsxs)(l.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(o.A,{className:"h-4 w-4"})})}),(0,t.jsx)(l.p4,{children:a})]}));p.displayName=l.q7.displayName,s.forwardRef(({className:e,...a},r)=>(0,t.jsx)(l.wv,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=l.wv.displayName},68988:(e,a,r)=>{r.d(a,{p:()=>l});var t=r(60687);r(43210);var s=r(96241);function l({className:e,type:a,...r}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}},85778:(e,a,r)=>{r.d(a,{A:()=>t});let t=(0,r(62688).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},92951:(e,a,r)=>{r.d(a,{H4:()=>w,_V:()=>b,bL:()=>N});var t=r(43210),s=r(11273),l=r(13495),n=r(66156),i=r(14163),o=r(60687),d="Avatar",[c,m]=(0,s.A)(d),[u,x]=c(d),f=t.forwardRef((e,a)=>{let{__scopeAvatar:r,...s}=e,[l,n]=t.useState("idle");return(0,o.jsx)(u,{scope:r,imageLoadingStatus:l,onImageLoadingStatusChange:n,children:(0,o.jsx)(i.sG.span,{...s,ref:a})})});f.displayName=d;var g="AvatarImage",p=t.forwardRef((e,a)=>{let{__scopeAvatar:r,src:s,onLoadingStatusChange:d=()=>{},...c}=e,m=x(g,r),u=function(e,{referrerPolicy:a,crossOrigin:r}){let s=t.useSyncExternalStore(y,()=>!0,()=>!1),l=t.useRef(null),i=s?(l.current||(l.current=new window.Image),l.current):null,[o,d]=t.useState(()=>v(i,e));return(0,n.N)(()=>{d(v(i,e))},[i,e]),(0,n.N)(()=>{let e=e=>()=>{d(e)};if(!i)return;let t=e("loaded"),s=e("error");return i.addEventListener("load",t),i.addEventListener("error",s),a&&(i.referrerPolicy=a),"string"==typeof r&&(i.crossOrigin=r),()=>{i.removeEventListener("load",t),i.removeEventListener("error",s)}},[i,r,a]),o}(s,c),f=(0,l.c)(e=>{d(e),m.onImageLoadingStatusChange(e)});return(0,n.N)(()=>{"idle"!==u&&f(u)},[u,f]),"loaded"===u?(0,o.jsx)(i.sG.img,{...c,ref:a,src:s}):null});p.displayName=g;var h="AvatarFallback",j=t.forwardRef((e,a)=>{let{__scopeAvatar:r,delayMs:s,...l}=e,n=x(h,r),[d,c]=t.useState(void 0===s);return t.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(e)}},[s]),d&&"loaded"!==n.imageLoadingStatus?(0,o.jsx)(i.sG.span,{...l,ref:a}):null});function v(e,a){return e?a?(e.src!==a&&(e.src=a),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function y(){return()=>{}}j.displayName=h;var N=f,b=p,w=j}};