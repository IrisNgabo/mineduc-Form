"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8554],{5623:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(19946).A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},47361:(e,t,s)=>{s.d(t,{DashboardCharts:()=>w});var a=s(95155),r=s(12115),i=s(83540),n=s(41287),l=s(94754),c=s(96025),o=s(16238),d=s(94517),h=s(62341),x=s(88482),g=s(5623),m=s(5196),u=s(54416),f=s(71007),p=s(92981),j=s(6874),y=s.n(j),v=s(61204);function w(e){let{userRole:t="admin"}=e,[s,j]=(0,r.useState)("workshops"),[w,N]=(0,r.useState)(0),[b,k]=(0,r.useState)(!0),[S,A]=(0,r.useState)(null),[E,B]=(0,r.useState)([]),[F,z]=(0,r.useState)([]),[C,D]=(0,r.useState)({}),[T,_]=(0,r.useState)(!0),[Z,P]=(0,r.useState)([]),[I,W]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{k(!0),A(null);let e=await fetch("".concat(v.f,"/delegates"));if(!e.ok)throw Error("Failed to fetch delegates data");let t=await e.json(),s=G(t);B(s)}catch(e){console.error("Error fetching delegates data:",e),A("Unable to fetch delegates data. Please try again later.")}finally{k(!1)}})()},[]);let G=e=>{let t=new Map;return e.forEach(e=>{if(e.registration_date){let s=new Date(e.registration_date).toISOString().split("T")[0];t.has(s)?t.set(s,t.get(s)+1):t.set(s,1)}}),Array.from(t.keys()).sort().map((e,s)=>({day:s+1,date:e,applications:t.get(e)||0}))};(0,r.useEffect)(()=>{(async()=>{try{k(!0),A(null);let e=(0,p.gf)();if(!e)return void A("Your session has expired. Please login again.");let t=await fetch("".concat(v.f,"/workshops"),{headers:{Authorization:"Bearer ".concat(e),accept:"*/*"}});if(!t.ok){if(401===t.status)return void A("Your session has expired. Please login again.");throw Error("Failed to fetch workshops")}let s=await t.json();N(s.length),z(s),await L(s)}catch(e){console.error("Error fetching workshops:",e),A("Unable to connect to the server. Please check your connection or try again later.")}finally{k(!1)}})()},[]);let L=async e=>{try{_(!0),W(!0);let t=(0,p.gf)();if(!t)throw Error("Authentication token not found");let s={},a=[];for(let r of e)try{let e=await fetch("".concat(v.f,"/delegates/by-workshops?ids=").concat(r.id),{headers:{Authorization:"Bearer ".concat(t),accept:"*/*"}});if(!e.ok)throw Error("Failed to fetch delegates for workshop ".concat(r.id));let i=(await e.json()).length;s[r.id]=i;let n=Math.round(i/100*100),l="success";n<50?l="error":n<75&&(l="warning"),a.push({id:r.id,name:r.title,percentage:n,status:l,count:i})}catch(e){console.error("Error fetching delegates for workshop ".concat(r.id,":"),e),s[r.id]=0}let r=a.sort((e,t)=>t.percentage-e.percentage);P(r),D(s)}catch(e){console.error("Error fetching workshop delegates:",e)}finally{_(!1),W(!1)}},U=e=>{j(e===s?null:e)},O=e=>{let{cx:t,cy:s}=e;return(0,a.jsxs)("g",{children:[(0,a.jsx)("circle",{cx:t,cy:s,r:6,fill:"#026FB4",stroke:"white",strokeWidth:2}),(0,a.jsx)("text",{x:t,y:s-15,textAnchor:"middle",fill:"#026FB4",fontSize:12,fontWeight:"bold",children:e.payload.applications})]})},H=e=>e>=80?"bg-green-500":e>=60?"bg-blue-500":e>=40?"bg-yellow-500":e>=20?"bg-orange-500":"bg-red-500";return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-700",children:"Applications"}),(0,a.jsx)(g.A,{className:"h-5 w-5 text-gray-500"})]}),(0,a.jsx)(x.Zp,{className:"p-4",children:(0,a.jsx)("div",{className:"h-[300px] w-full",children:(0,a.jsx)(i.u,{width:"100%",height:"100%",children:(0,a.jsxs)(n.Q,{data:E,margin:{top:20,right:20,left:0,bottom:0},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorApplications",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#026FB4",stopOpacity:.4}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#026FB4",stopOpacity:.05})]})}),(0,a.jsx)(l.d,{strokeDasharray:"3 3",vertical:!1,stroke:"#f0f0f0"}),(0,a.jsx)(c.W,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#888"},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,a.jsx)(o.h,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#888"},domain:[0,"dataMax + 2"]}),(0,a.jsx)(d.m,{content:(0,a.jsx)(e=>{let{active:t,payload:s}=e;return t&&s&&s.length?(0,a.jsxs)("div",{className:"bg-black text-white text-xs p-2 rounded shadow-lg",children:[(0,a.jsx)("p",{className:"font-medium",children:"".concat(s[0].value," Applications")}),(0,a.jsx)("p",{className:"text-gray-300",children:"".concat(new Date(s[0].payload.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}))})]}):null},{})}),(0,a.jsx)(h.G,{type:"monotone",dataKey:"applications",stroke:"#026FB4",strokeWidth:2,fill:"url(#colorApplications)",activeDot:e=>(0,a.jsx)(O,{...e})})]})})})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:["admin"===t&&(0,a.jsx)("div",{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-700",children:"Workshop Attendance"})}),(0,a.jsx)(x.Zp,{className:"p-4",children:I?(0,a.jsx)("div",{className:"flex justify-center items-center h-24",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#026FB4]"})}):0===Z.length?(0,a.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No workshop data available"}):(0,a.jsx)("div",{className:"space-y-4",children:Z.slice(0,8).map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.percentage>=75?(0,a.jsx)(m.A,{className:"h-4 w-4 text-green-500"}):e.percentage<50?(0,a.jsx)(u.A,{className:"h-4 w-4 text-red-500"}):(0,a.jsx)(u.A,{className:"h-4 w-4 text-orange-500"}),(0,a.jsx)("span",{className:"text-sm font-medium truncate max-w-[150px]",title:e.name,children:e.name})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.count,"/100"]}),(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-700",children:[e.percentage,"%"]})]})]}),(0,a.jsx)("div",{className:"h-2 w-full bg-gray-100 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full ".concat(H(e.percentage)),style:{width:"".concat(e.percentage,"%")}})})]},e.id))})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)(x.Zp,{className:"p-4 cursor-pointer transition-all duration-200 h-full ".concat("workshops"===s?"ring-2 ring-[#026FB4]":""),onClick:()=>U("workshops"),style:{backgroundColor:"workshops"===s?"#f0f7ff":"#026FB4"},children:(0,a.jsxs)(y(),{href:"/admin/workshops",className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium ".concat("workshops"===s?"text-gray-600":"text-white"),children:"Workshops"}),(0,a.jsx)("p",{className:"text-4xl font-bold mt-2 ".concat("workshops"===s?"text-gray-800":"text-white"),children:b?(0,a.jsx)("span",{className:"text-2xl",children:"..."}):S?(0,a.jsx)("span",{className:"text-2xl",children:"-"}):w}),S&&(0,a.jsx)("p",{className:"text-xs mt-1 ".concat("workshops"===s?"text-red-500":"text-red-300"),children:"Error loading data"}),(0,a.jsx)("p",{className:"text-xs mt-1 ".concat("workshops"===s?"text-gray-500":"text-white/80"),children:"In one event"})]}),(0,a.jsx)("div",{className:"p-2 rounded-full bg-[#026FB4]",children:(0,a.jsx)(f.A,{className:"h-5 w-5 text-white"})})]})})}),(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-700",children:"Applications per workshop"})}),(0,a.jsx)(x.Zp,{className:"p-4",children:T?(0,a.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#026FB4]"})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:F.map(e=>(0,a.jsxs)(x.Zp,{className:"p-4 flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-800",children:C[e.id]||0}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2 text-center",children:e.title})]},e.id))})})]})]})]})}},53999:(e,t,s)=>{s.d(t,{cn:()=>i});var a=s(52596),r=s(39688);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},61204:(e,t,s)=>{s.d(t,{f:()=>a});let a="https://api.rwandafutureskillsforum.rtbdev.online"},82551:(e,t,s)=>{s.d(t,{DashboardStats:()=>g});var a=s(95155),r=s(12115),i=s(88482),n=s(71007),l=s(17580),c=s(92981),o=s(56671),d=s(6874),h=s.n(d),x=s(61204);function g(){let[e,t]=(0,r.useState)(null),[s,d]=(0,r.useState)(0),[g,m]=(0,r.useState)(0),[u,f]=(0,r.useState)(0),[p,j]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let e=(0,c.gf)();if(!e)return void console.error("No token found");let t=await fetch("".concat(x.f,"/users/all"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let s=await t.json();d(s.length);let a=await fetch("".concat(x.f,"/delegates"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.json();m(r.length);let i=await fetch("".concat(x.f,"/speakers/getAllSpeakers"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}});if(!i.ok)throw Error("HTTP error! status: ".concat(i.status));let n=await i.json();f(n.length)}catch(e){console.error("Error fetching data:",e),o.o.error("Failed to load data")}finally{j(!1)}})()},[]);let y=s=>{t(s===e?null:s)};return(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-700 mb-4",children:"Users"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)(i.Zp,{className:"p-4 cursor-pointer transition-all duration-200 ".concat("system-users"===e?"ring-2 ring-[#026FB4]":""),onClick:()=>y("system-users"),style:{backgroundColor:"system-users"===e?"#f0f7ff":"white"},children:(0,a.jsxs)(h(),{href:"/admin/users",className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"System Users"}),(0,a.jsx)("p",{className:"text-4xl font-bold mt-2 text-gray-800",children:p?"...":s}),(0,a.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Total users in the system"})]}),(0,a.jsx)("div",{className:"p-2 rounded-full bg-gray-100",children:(0,a.jsx)(n.A,{className:"h-5 w-5 text-[#026FB4]"})})]})}),(0,a.jsx)(i.Zp,{className:"p-4 cursor-pointer transition-all duration-200 ".concat("registered-delegates"===e?"ring-2 ring-[#026FB4]":""),onClick:()=>y("registered-delegates"),style:{backgroundColor:"registered-delegates"===e?"#f0f7ff":"white"},children:(0,a.jsxs)(h(),{href:"/admin/registrations",className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Registered Delegates"}),(0,a.jsx)("p",{className:"text-4xl font-bold mt-2 text-gray-800",children:p?"...":g}),(0,a.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Found in 8 workshops"})]}),(0,a.jsx)("div",{className:"p-2 rounded-full bg-gray-100",children:(0,a.jsx)(l.A,{className:"h-5 w-5 text-[#026FB4]"})})]})}),(0,a.jsx)(i.Zp,{className:"p-4 cursor-pointer transition-all duration-200 ".concat("speakers"===e?"ring-2 ring-[#026FB4]":""),onClick:()=>y("speakers"),style:{backgroundColor:"speakers"===e?"#f0f7ff":"white"},children:(0,a.jsxs)(h(),{href:"/admin/speakers",className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Speakers"}),(0,a.jsx)("p",{className:"text-4xl font-bold mt-2 text-gray-800",children:p?"...":u}),(0,a.jsx)("p",{className:"text-xs mt-1 text-gray-500",children:"Present in 3 Events"})]}),(0,a.jsx)("div",{className:"p-2 rounded-full bg-gray-100",children:(0,a.jsx)(n.A,{className:"h-5 w-5 text-[#026FB4]"})})]})})]})]})}},88482:(e,t,s)=>{s.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>l,Zp:()=>i,aR:()=>n});var a=s(95155);s(12115);var r=s(53999);function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}},92981:(e,t,s)=>{s.d(t,{G6:()=>d,WG:()=>l,fE:()=>c,gf:()=>i,ve:()=>n,zu:()=>o});let a="access",r="refresh_token",i=()=>localStorage.getItem(a),n=()=>localStorage.getItem(r),l=e=>{localStorage.setItem(a,e)},c=e=>{localStorage.setItem(r,e)},o=()=>{localStorage.removeItem(a),localStorage.removeItem(r)},d=()=>{let e=i();if(!e)return!1;try{let t=JSON.parse(atob(e.split(".")[1])),s=1e3*t.exp;return Date.now()<s}catch(e){return console.error("Error checking token validity:",e),!1}}},97168:(e,t,s)=>{s.d(t,{$:()=>c,r:()=>l});var a=s(95155);s(12115);var r=s(99708),i=s(74466),n=s(53999);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:s,size:i,asChild:c=!1,...o}=e,d=c?r.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,n.cn)(l({variant:s,size:i,className:t})),...o})}}}]);