(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4598],{16671:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>E});var a=s(95155),l=s(12115),i=s(88482),r=s(97168),n=s(89852),o=s(67133),c=s(99840),d=s(95784),h=s(47924),m=s(84616),x=s(4516),p=s(69074),g=s(14186),u=s(48264),f=s(5623),j=s(54416),v=s(29953),w=s(56671),N=s(92981),b=s(73168),y=s(61204);let k=[{label:"Green",value:"bg-green-500"},{label:"Blue",value:"bg-blue-500"},{label:"Red",value:"bg-red-500"}];function E(){var e;let[t,s]=(0,l.useState)([]),[E,C]=(0,l.useState)(!1),[F,S]=(0,l.useState)(null),[B,A]=(0,l.useState)(""),[P,T]=(0,l.useState)({title:"",description:"",date:"",time:"",location:"",color:"blue",capacity:0,registered:0}),[D,I]=(0,l.useState)(!1),[z,L]=(0,l.useState)(!1),[W,G]=(0,l.useState)(!1),[M,O]=(0,l.useState)(!1),[Y,$]=(0,l.useState)(1),[_,H]=(0,l.useState)([]),[U,R]=(0,l.useState)([]),[q,V]=(0,l.useState)(!0),[J,Z]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{V(!0),console.log(q);let e=(0,N.gf)();if(!e){w.o.error("Your session has expired. Please login again."),console.log(J),window.location.href="/login";return}let t=await fetch("".concat(y.f,"/events/all-events"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),accept:"*/*"}});if(!t.ok){if(401===t.status){w.o.error("Your session has expired. Please login again."),window.location.href="/login";return}if(404===t.status){console.log("No events found, initializing with empty array"),s([]),V(!1);return}let e=await t.json();throw Error(e.message||"HTTP error! status: ".concat(t.status))}let a=await t.json();console.log("Raw API response:",a);let l=a.map(e=>{let t=new Date(e.schedule);console.log("Event ".concat(e.name,' has theme: "').concat(e.theme,'"'));let s="bg-blue-500";if(e.theme){let t=e.theme.toLowerCase().trim();"red"===t||"green"===t||"blue"===t?s="bg-".concat(t,"-500"):t.startsWith("bg-")&&(t.includes("red")||t.includes("green")||t.includes("blue"))&&(s=t)}return{id:e.id,title:e.name,description:"",date:(0,b.GP)(t,"yyyy-MM-dd"),time:(0,b.GP)(t,"HH:mm"),location:e.venue,color:s,capacity:0,registered:0,workshops:e.workshops.map(e=>({id:e.id,title:e.title,description:"",date:(0,b.GP)(new Date(e.schedule),"yyyy-MM-dd"),time:(0,b.GP)(new Date(e.schedule),"HH:mm"),location:e.venue,status:"Upcoming",capacity:e.capacity.toString(),registered:"0"}))}});console.log("Formatted events with themes:",l.map(e=>({id:e.id,title:e.title,color:e.color}))),s(l)}catch(t){console.error("Error fetching events:",t);let e=t instanceof Error?t.message:"Failed to fetch events";w.o.error(e),Z(e),s([])}finally{V(!1)}})()},[J,q]),(0,l.useEffect)(()=>{(async()=>{try{let e=(0,N.gf)();if(!e){w.o.error("Your session has expired. Please login again."),window.location.href="/login";return}let t=await fetch("".concat(y.f,"/workshops"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok){if(401===t.status){w.o.error("Your session has expired. Please login again."),window.location.href="/login";return}throw Error("HTTP error! status: ".concat(t.status))}let s=await t.json();H(s)}catch(e){console.error("Error fetching workshops:",e),w.o.error(e instanceof Error?e.message:"Failed to fetch workshops")}})()},[]);let Q=t.filter(e=>{var t,s;if(!e)return!1;let a=B.toLowerCase();return((null==(t=e.title)?void 0:t.toLowerCase())||"").includes(a)||((null==(s=e.location)?void 0:s.toLowerCase())||"").includes(a)}),K=e=>{S(e),I(!0)},X=e=>{S(e),T({title:e.title,description:e.description||"",date:e.date,time:e.time,location:e.location,color:e.color,capacity:e.capacity,registered:e.registered}),O(!0)},ee=async e=>{try{let a=(0,N.gf)();if(!a){w.o.error("Your session has expired. Please login again."),window.location.href="/login";return}let l=await fetch("".concat(y.f,"/events/").concat(e.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!l.ok){if(401===l.status){w.o.error("Your session has expired. Please login again."),window.location.href="/login";return}let e=await l.json();throw Error(e.message||"Failed to delete event: ".concat(l.status))}s(t.filter(t=>t.id!==e.id)),L(!1),S(null),w.o.success("Event deleted successfully!")}catch(e){console.error("Error deleting event:",e),w.o.error(e instanceof Error?e.message:"Failed to delete event")}},et=e=>{let{name:t,value:s}=e.target;T(e=>({...e,[t]:s}))},es=e=>{T(t=>({...t,color:e}))},ea=async(e,t)=>{try{let a=(0,N.gf)();if(!a){w.o.error("Your session has expired. Please login again."),window.location.href="/login";return}console.log("Removing workshop:",{eventId:e,workshopId:t});let l=await fetch("".concat(y.f,"/events/").concat(e,"/workshops/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(console.log("Response status:",l.status),!l.ok){if(401===l.status){w.o.error("Your session has expired. Please login again."),window.location.href="/login";return}let e="Failed to remove workshop: ".concat(l.status);try{let t=await l.json();e=t.message||e,console.error("Error response:",t)}catch(e){console.error("Error parsing error response:",e)}throw Error(e)}s(s=>s.map(s=>{if(s.id===e){var a;return{...s,workshops:(null==(a=s.workshops)?void 0:a.filter(e=>e.id!==t))||[]}}return s})),(null==F?void 0:F.id)===e&&S(e=>{var s;return e?{...e,workshops:(null==(s=e.workshops)?void 0:s.filter(e=>e.id!==t))||[]}:null}),w.o.success("Workshop removed successfully!")}catch(e){console.error("Error removing workshop:",e),w.o.error(e instanceof Error?e.message:"Failed to remove workshop")}},el=async()=>{try{let e=(0,N.gf)();if(!e){w.o.error("Your session has expired. Please login again."),window.location.href="/login";return}if(!P.title||!P.location||!P.date||!P.time)return void w.o.error("Please fill in all required fields");if(!P.date||!P.time)throw Error("Date and time are required");let[t,a,l]=P.date.split("-"),[i,r]=P.time.split(":"),n=new Date(parseInt(t),parseInt(a)-1,parseInt(l),parseInt(i),parseInt(r)).toISOString(),o="blue";if(P.color){let e=P.color.match(/bg-([a-z]+)-/);e&&e[1]&&(o=e[1])}let c={name:P.title,venue:P.location,theme:o,schedule:n,description:P.description||"",capacity:P.capacity||0,registered:0};console.log("Submitting event data:",c);let d=await fetch("".concat(y.f,"/events"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok){if(401===d.status){w.o.error("Your session has expired. Please login again."),window.location.href="/login";return}let e=await d.json();throw Error(e.message||"HTTP error! status: ".concat(d.status))}let h=await d.json();console.log("Created event:",h);let m="bg-blue-500";if(h.theme){let e=h.theme.toLowerCase().trim();"red"===e||"green"===e||"blue"===e?m="bg-".concat(e,"-500"):e.startsWith("bg-")&&(m=e)}let x={id:h.id,title:h.name,description:h.description,date:new Date(h.schedule).toISOString().split("T")[0],time:new Date(h.schedule).toTimeString().split(" ")[0].substring(0,5),location:h.venue,color:m,capacity:h.capacity,registered:h.registered,workshops:h.workshops||[]};s(e=>[...e,x]),G(!1),$(1),T({title:"",description:"",date:"",time:"",location:"",color:"bg-blue-500",capacity:0,registered:0}),w.o.success("Event created successfully!");let p=await fetch("".concat(y.f,"/events/all-events"),{headers:{Authorization:"Bearer ".concat(e)}});if(p.ok){let e=(await p.json()).map(e=>{let t="bg-blue-500";if(e.theme){let s=e.theme.toLowerCase().trim();"red"===s||"green"===s||"blue"===s?t="bg-".concat(s,"-500"):s.startsWith("bg-")&&(t=s)}return{id:e.id,title:e.name,description:e.description,date:new Date(e.schedule).toISOString().split("T")[0],time:new Date(e.schedule).toTimeString().split(" ")[0].substring(0,5),location:e.venue,color:t,capacity:e.capacity,registered:e.registered,workshops:e.workshops||[]}});s(e)}}catch(e){console.error("Error creating event:",e),w.o.error(e instanceof Error?e.message:"Failed to create event")}},ei=async()=>{try{if(!F)return;let e=(0,N.gf)();if(!e){w.o.error("Your session has expired. Please login again."),window.location.href="/login";return}if(!P.date||!P.time)throw Error("Date and time are required");let[t,a,l]=P.date.split("-"),[i,r]=P.time.split(":"),n=new Date(parseInt(t),parseInt(a)-1,parseInt(l),parseInt(i),parseInt(r)).toISOString(),o="blue";if(P.color){let e=P.color.match(/bg-([a-z]+)-/);e&&e[1]&&(o=e[1])}let c={name:P.title,venue:P.location,theme:o,schedule:n,description:P.description||"",capacity:P.capacity||0,isPublished:!0};console.log("Updating event with data:",c);let d=await fetch("".concat(y.f,"/events/").concat(F.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(c)});if(!d.ok){if(401===d.status){w.o.error("Your session has expired. Please login again."),window.location.href="/login";return}let e=await d.json();throw Error(e.message||"HTTP error! status: ".concat(d.status))}let h=await d.json();console.log("Updated event response:",h);let m="bg-blue-500";if(h.theme){let e=h.theme.toLowerCase().trim();"red"===e||"green"===e||"blue"===e?m="bg-".concat(e,"-500"):e.startsWith("bg-")&&(m=e)}let x={id:h.id,title:h.name,description:h.description||"",date:(0,b.GP)(new Date(h.schedule),"yyyy-MM-dd"),time:(0,b.GP)(new Date(h.schedule),"HH:mm"),location:h.venue,color:m,capacity:"string"==typeof h.capacity?parseInt(h.capacity):h.capacity||0,registered:"string"==typeof h.registered?parseInt(h.registered):h.registered||0,workshops:F.workshops||[]};s(e=>e.map(e=>e.id===F.id?x:e)),O(!1),T({title:"",description:"",date:"",time:"",location:"",color:"bg-blue-500",capacity:0,registered:0}),w.o.success("Event updated successfully!");let p=await fetch("".concat(y.f,"/events/").concat(F.id,"/workshops"),{headers:{Authorization:"Bearer ".concat(e)}});if(p.ok){let e=(await p.json()).map(e=>{var t,s;return{id:e.id,title:e.title,description:e.description||"",date:(0,b.GP)(new Date(e.schedule),"yyyy-MM-dd"),time:(0,b.GP)(new Date(e.schedule),"HH:mm"),location:e.venue,status:e.status||"Upcoming",capacity:(null==(t=e.capacity)?void 0:t.toString())||"0",registered:(null==(s=e.registered)?void 0:s.toString())||"0"}});s(t=>t.map(t=>t.id===F.id?{...t,workshops:e}:t))}}catch(e){console.error("Error updating event:",e),w.o.error(e instanceof Error?e.message:"Failed to update event")}},er=async(e,t)=>{try{var a,l;let i=(0,N.gf)();if(!i){w.o.error("Your session has expired. Please login again."),window.location.href="/login";return}console.log("Assigning workshop:",{eventId:e,workshopId:t});let r=await fetch("".concat(y.f,"/workshops/").concat(t),{headers:{Authorization:"Bearer ".concat(i)}});if(!r.ok)throw console.error("Failed to fetch workshop details:",r.status),Error("Failed to fetch workshop details");let n=await r.json();console.log("Workshop data:",n);let o=await fetch("".concat(y.f,"/events/").concat(e,"/workshops/").concat(t),{method:"PUT",headers:{Authorization:"Bearer ".concat(i),"Content-Type":"application/json"}});if(console.log("Assignment response status:",o.status),!o.ok){if(401===o.status){w.o.error("Your session has expired. Please login again."),window.location.href="/login";return}let e="Failed to assign workshop: ".concat(o.status);try{let t=await o.json();console.error("Error response data:",t),t&&"object"==typeof t&&(e=t.message||e)}catch(e){console.error("Error parsing error response:",e)}throw Error(e)}let c="";try{n.date&&(c=(0,b.GP)(new Date(n.date),"yyyy-MM-dd"))}catch(e){console.error("Error formatting date:",e),c=n.date||""}let d={id:n.id,title:n.title,description:n.description||"",date:c,time:n.time||"",location:n.location||"",status:n.status||"Upcoming",capacity:(null==(a=n.capacity)?void 0:a.toString())||"0",registered:(null==(l=n.registered)?void 0:l.toString())||"0"};console.log("New workshop object:",d),s(s=>s.map(s=>{if(s.id===e){let e=s.workshops||[];if(!e.some(e=>e.id===t))return{...s,workshops:[...e,d]}}return s})),(null==F?void 0:F.id)===e&&S(e=>{if(!e)return null;let s=e.workshops||[];return s.some(e=>e.id===t)?e:{...e,workshops:[...s,d]}}),w.o.success("Workshop assigned successfully!")}catch(e){console.error("Error in handleAssignWorkshop:",e),w.o.error(e instanceof Error?e.message:"Failed to assign workshop")}};return(0,a.jsxs)("div",{className:"container mx-auto py-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Events"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your events and workshops"})]}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(h.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.p,{placeholder:"Search events...",value:B,onChange:e=>A(e.target.value),className:"pl-8 w-[300px]"})]})})]}),(0,a.jsxs)(i.Zp,{className:"mb-6",children:[(0,a.jsxs)(i.aR,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ZB,{className:"text-[#026FB4]",children:"Events Management"}),(0,a.jsx)(i.BT,{children:"Manage all workshops and activities."})]}),(0,a.jsxs)(r.$,{onClick:()=>G(!0),className:"bg-[#026FB4] hover:bg-[#025a91] text-white",children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"})," Add Event"]})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"mb-6 flex items-center gap-4",children:(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(h.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.p,{placeholder:"Search Events...",className:"pl-8",value:B,onChange:e=>{A(e.target.value)}})]})}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsxs)("table",{className:"w-full caption-bottom text-sm",children:[(0,a.jsx)("thead",{className:"[&_tr]:border-b",children:(0,a.jsxs)("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[(0,a.jsx)("th",{className:"h-14 px-4 text-left align-middle font-medium",children:"Events"}),(0,a.jsx)("th",{className:"h-14 px-4 text-left align-middle font-medium",children:"Location"}),(0,a.jsx)("th",{className:"h-14 px-4 text-left align-middle font-medium",children:"Date"}),(0,a.jsx)("th",{className:"h-14 px-4 text-left align-middle font-medium",children:"Time"}),(0,a.jsx)("th",{className:"h-14 px-4 text-left align-middle font-medium w-[250px]",children:"Workshops"}),(0,a.jsx)("th",{className:"h-14 px-4 text-left align-middle font-medium",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"[&_tr:last-child]:border-0",children:Q.map(e=>{var t;return(0,a.jsxs)("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[(0,a.jsx)("td",{className:"p-6 align-middle",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-6 w-6 rounded-full ".concat(e.color)}),(0,a.jsx)("span",{className:"font-medium",children:e.title})]})}),(0,a.jsx)("td",{className:"p-6 align-middle",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)("span",{children:e.location})]})}),(0,a.jsx)("td",{className:"p-6 align-middle",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)("span",{children:e.date})]})}),(0,a.jsx)("td",{className:"p-6 align-middle",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsx)("span",{children:e.time})]})}),(0,a.jsx)("td",{className:"p-6 align-middle",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-[120px]",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-muted-foreground"}),(0,a.jsxs)("span",{children:[(null==(t=e.workshops)?void 0:t.length)||0," Workshops"]})]}),(0,a.jsx)(r.$,{size:"sm",className:"bg-[#026FB4] hover:bg-[#025a91] text-white",onClick:()=>{S(e),C(!0)},children:"Assign"})]})}),(0,a.jsx)("td",{className:"p-6 align-middle",children:(0,a.jsxs)(o.rI,{children:[(0,a.jsx)(o.ty,{asChild:!0,children:(0,a.jsx)(r.$,{variant:"ghost",className:"h-9 w-9 p-0",children:(0,a.jsx)(f.A,{className:"h-5 w-5"})})}),(0,a.jsxs)(o.SQ,{align:"end",children:[(0,a.jsx)(o._2,{onClick:()=>K(e),children:"View"}),(0,a.jsx)(o._2,{onClick:()=>X(e),children:"Edit"}),(0,a.jsx)(o._2,{onClick:()=>ee(e),className:"text-red-600",children:"Remove"})]})]})})]},e.id)})})]})})})]})]}),(0,a.jsx)(c.lG,{open:D,onOpenChange:I,children:(0,a.jsxs)(c.Cf,{className:"sm:max-w-[800px] p-0",children:[(0,a.jsx)(c.c7,{className:"p-6 pb-2 bg-[#026FB4] text-white rounded-t-lg",children:(0,a.jsx)(c.L3,{className:"text-2xl font-bold",children:"Event Details"})}),F&&(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6 mb-8",children:[(0,a.jsx)("div",{className:"h-16 w-16 rounded-full ".concat(F.color," flex items-center justify-center"),children:(0,a.jsx)(p.A,{className:"h-8 w-8 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-[#026FB4]",children:F.title}),(0,a.jsxs)("p",{className:"text-lg text-muted-foreground",children:["Organized by ",F.location]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)("h3",{className:"text-xl font-medium text-[#026FB4]",children:"Location"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-lg",children:[(0,a.jsx)(x.A,{className:"h-6 w-6 text-[#026FB4]"}),(0,a.jsx)("p",{children:F.location})]})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)("h3",{className:"text-xl font-medium text-[#026FB4]",children:"Date & Time"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-lg",children:[(0,a.jsx)(p.A,{className:"h-6 w-6 text-[#026FB4]"}),(0,a.jsx)("p",{children:F.date})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsx)("h3",{className:"text-xl font-medium text-[#026FB4] mb-2",children:"Workshops"}),(0,a.jsx)("div",{className:"rounded-md border overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full caption-bottom text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"h-12 px-6 text-left align-middle font-medium text-[#026FB4]",children:"Title"}),(0,a.jsx)("th",{className:"h-12 px-6 text-left align-middle font-medium text-[#026FB4]",children:"Time"}),(0,a.jsx)("th",{className:"h-12 px-6 text-left align-middle font-medium text-[#026FB4]",children:"Location"}),(0,a.jsx)("th",{className:"h-12 px-6 text-left align-middle font-medium text-[#026FB4]",children:"Status"}),(0,a.jsx)("th",{className:"h-12 px-6 text-left align-middle font-medium text-[#026FB4]",children:"Capacity"}),(0,a.jsx)("th",{className:"h-12 px-6 text-left align-middle font-medium text-[#026FB4]",children:"Registered"})]})}),(0,a.jsx)("tbody",{children:null==(e=F.workshops)?void 0:e.map((e,l)=>(0,a.jsxs)("tr",{className:"border-t border-gray-200 transition-colors hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"p-4 align-middle",children:[(0,a.jsx)("div",{className:"font-medium",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground mt-1",children:e.description})]}),(0,a.jsx)("td",{className:"p-4 align-middle",children:e.date}),(0,a.jsx)("td",{className:"p-4 align-middle",children:e.location}),(0,a.jsx)("td",{className:"p-4 align-middle",children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:e.status})}),(0,a.jsx)("td",{className:"p-4 align-middle text-center",children:e.capacity}),(0,a.jsx)("td",{className:"p-4 align-middle",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(n.p,{type:"number",className:"w-20 h-9 text-center",value:e.registered,onChange:e=>{let a=[...F.workshops];a[l]={...a[l],registered:e.target.value},s(t.map(e=>e.id===F.id?{...F,workshops:a}:e))}}),(0,a.jsxs)("span",{className:"text-sm whitespace-nowrap",children:["of ",e.capacity]})]})})]},l))})]})})]})]}),(0,a.jsx)(c.Es,{className:"p-6 pt-2 border-t",children:(0,a.jsx)(r.$,{onClick:()=>I(!1),className:"bg-[#026FB4] hover:bg-[#025a91] text-white px-8",children:"Close"})})]})}),(0,a.jsx)(v.W,{open:z,onClose:()=>L(!1),onConfirm:()=>ee(F),title:"Remove Event",description:"Are you sure you want to remove ".concat(null==F?void 0:F.title,"?")}),(0,a.jsx)(c.lG,{open:W,onOpenChange:e=>{G(e),e||$(1)},children:(0,a.jsxs)(c.Cf,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(c.c7,{children:[(0,a.jsx)(c.L3,{className:"text-[#026FB4]",children:"Add Events"}),(0,a.jsx)(c.rr,{children:"Fill in the following form to add an event"})]}),(0,a.jsxs)("div",{className:"relative mb-6 mt-2",children:[(0,a.jsx)("div",{className:"absolute left-0 right-0 top-1/2 h-0.5 -translate-y-1/2 transform bg-gray-200"}),(0,a.jsxs)("div",{className:"relative flex justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"z-10 flex h-6 w-6 items-center justify-center rounded-full ".concat(Y>=1?"bg-[#026FB4] text-white":"bg-gray-200"),children:"1"}),(0,a.jsx)("span",{className:"mt-2 text-xs",children:"Event Details"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"z-10 flex h-6 w-6 items-center justify-center rounded-full ".concat(Y>=2?"bg-[#026FB4] text-white":"bg-gray-200"),children:"2"}),(0,a.jsx)("span",{className:"mt-2 text-xs",children:"Schedule Details"})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"z-10 flex h-6 w-6 items-center justify-center rounded-full ".concat(Y>=3?"bg-[#026FB4] text-white":"bg-gray-200"),children:"3"}),(0,a.jsx)("span",{className:"mt-2 text-xs",children:"Calendar & Venue Details"})]})]})]}),1===Y&&(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{htmlFor:"event-name",className:"text-sm font-medium",children:"Event name"}),(0,a.jsx)(n.p,{id:"event-name",name:"title",value:P.title,onChange:et,placeholder:"Name"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{htmlFor:"theme",className:"text-sm font-medium",children:"Theme"}),(0,a.jsxs)(d.l6,{value:P.color,onValueChange:es,children:[(0,a.jsx)(d.bq,{id:"theme",children:(0,a.jsx)(d.yv,{placeholder:"Select theme color"})}),(0,a.jsx)(d.gC,{children:k.map(e=>(0,a.jsx)(d.eb,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-3 w-3 rounded-full ".concat(e.value)}),(0,a.jsx)("span",{children:e.label})]})},e.value))})]})]})]}),2===Y&&(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{htmlFor:"date",className:"text-sm font-medium",children:"Date"}),(0,a.jsx)(n.p,{id:"date",name:"date",type:"date",value:P.date,onChange:et,placeholder:"Select date"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{htmlFor:"time",className:"text-sm font-medium",children:"Time"}),(0,a.jsx)(n.p,{id:"time",name:"time",type:"time",value:P.time,onChange:et,placeholder:"Select time"})]})]}),3===Y&&(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{htmlFor:"location",className:"text-sm font-medium",children:"Location"}),(0,a.jsx)(n.p,{id:"location",name:"location",value:P.location,onChange:et,placeholder:"Enter location"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{htmlFor:"capacity",className:"text-sm font-medium",children:"Capacity"}),(0,a.jsx)(n.p,{id:"capacity",name:"capacity",type:"number",value:P.capacity,onChange:et,placeholder:"Enter capacity"})]})]}),(0,a.jsxs)(c.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),Y<3?(0,a.jsx)(r.$,{onClick:()=>{$(e=>e+1)},className:"bg-[#026FB4] hover:bg-[#025a91]",children:"Next"}):(0,a.jsx)(r.$,{onClick:el,className:"bg-[#026FB4] hover:bg-[#025a91]",children:"Add"})]})]})}),(0,a.jsx)(c.lG,{open:M,onOpenChange:O,children:(0,a.jsxs)(c.Cf,{className:"sm:max-w-[700px]",children:[(0,a.jsxs)(c.c7,{children:[(0,a.jsx)(c.L3,{className:"text-[#026FB4]",children:"Edit Event"}),(0,a.jsx)(c.rr,{children:"Update the event details"})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{htmlFor:"edit-name",className:"text-sm font-medium",children:"Event Name"}),(0,a.jsx)(n.p,{id:"edit-name",name:"title",value:P.title,onChange:et,placeholder:"Enter event name"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{htmlFor:"edit-theme",className:"text-sm font-medium",children:"Theme"}),(0,a.jsxs)(d.l6,{value:P.color,onValueChange:es,children:[(0,a.jsx)(d.bq,{id:"edit-theme",children:(0,a.jsx)(d.yv,{placeholder:"Select theme color"})}),(0,a.jsx)(d.gC,{children:k.map(e=>(0,a.jsx)(d.eb,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-3 w-3 rounded-full ".concat(e.value)}),(0,a.jsx)("span",{children:e.label})]})},e.value))})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{htmlFor:"edit-location",className:"text-sm font-medium",children:"Location"}),(0,a.jsx)(n.p,{id:"edit-location",name:"location",value:P.location,onChange:et,placeholder:"Enter location"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("label",{htmlFor:"edit-workshops",className:"text-sm font-medium",children:"Assigned Workshops"}),(null==F?void 0:F.workshops)&&F.workshops.length>0?(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsxs)("table",{className:"w-full caption-bottom text-sm",children:[(0,a.jsx)("thead",{className:"[&_tr]:border-b bg-gray-50",children:(0,a.jsxs)("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[(0,a.jsx)("th",{className:"h-10 px-4 text-left align-middle font-medium text-[#026FB4]",children:"Title"}),(0,a.jsx)("th",{className:"h-10 px-4 text-left align-middle font-medium text-[#026FB4]",children:"Time"}),(0,a.jsx)("th",{className:"h-10 px-4 text-left align-middle font-medium text-[#026FB4]",children:"Location"}),(0,a.jsx)("th",{className:"h-10 px-4 text-left align-middle font-medium text-[#026FB4]",children:"Status"}),(0,a.jsx)("th",{className:"h-10 px-4 text-left align-middle font-medium text-[#026FB4]",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"[&_tr:last-child]:border-0",children:F.workshops.map(e=>(0,a.jsxs)("tr",{className:"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",children:[(0,a.jsx)("td",{className:"p-3 align-middle",children:(0,a.jsx)("div",{className:"font-medium",children:e.title})}),(0,a.jsx)("td",{className:"p-3 align-middle",children:e.date}),(0,a.jsx)("td",{className:"p-3 align-middle",children:e.location}),(0,a.jsx)("td",{className:"p-3 align-middle",children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:e.status})}),(0,a.jsx)("td",{className:"p-3 align-middle",children:(0,a.jsx)(r.$,{variant:"ghost",size:"sm",onClick:()=>{F&&ea(F.id,e.id)},className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})})})]},e.id))})]})})}):(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No workshops assigned yet."})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)(d.l6,{value:U.join(","),onValueChange:e=>{let t=e.split(",").filter(e=>""!==e);if(R(t),F){let e=Array.from(new Map(_.filter(e=>t.includes(e.id)).map(e=>{var t,s;let a="";try{e.date&&(a=(0,b.GP)(new Date(e.date),"yyyy-MM-dd"))}catch(t){console.error("Error formatting date:",t),a=e.date||""}return{id:e.id,title:e.title,description:e.description||"",date:a,time:e.time||"",location:e.location||"",status:e.status||"Upcoming",capacity:(null==(t=e.capacity)?void 0:t.toString())||"0",registered:(null==(s=e.registered)?void 0:s.toString())||"0"}}).map(e=>[e.id,e])).values());S(t=>t?{...t,workshops:e}:null)}},children:[(0,a.jsx)(d.bq,{id:"edit-workshop-select",children:(0,a.jsx)(d.yv,{placeholder:"Select workshops"})}),(0,a.jsx)(d.gC,{children:_.filter(e=>{var t;return!(null==F||null==(t=F.workshops)?void 0:t.some(t=>t.id===e.id))}).map(e=>(0,a.jsx)(d.eb,{value:e.id,children:e.title},e.id))})]}),(0,a.jsx)(r.$,{onClick:async()=>{if(F){for(let e of U)await er(F.id,e);R([])}},className:"mt-2 w-full bg-[#026FB4] hover:bg-[#025a91]",children:"Assign Selected Workshops"})]})]}),(0,a.jsxs)(c.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),(0,a.jsx)(r.$,{onClick:ei,className:"bg-[#026FB4] hover:bg-[#025a91]",children:"Update Event"})]})]})}),(0,a.jsx)(c.lG,{open:E,onOpenChange:C,children:(0,a.jsxs)(c.Cf,{className:"sm:max-w-[600px]",children:[(0,a.jsxs)(c.c7,{children:[(0,a.jsx)(c.L3,{children:"Assign Workshops"}),(0,a.jsx)(c.rr,{children:"Select workshops to assign to this event. You can select multiple workshops."})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"max-h-[300px] overflow-y-auto border rounded-md p-4",children:[_.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 py-2 hover:bg-gray-50 rounded-md px-2",children:[(0,a.jsx)("input",{type:"checkbox",id:e.id,checked:U.includes(e.id),onChange:t=>{t.target.checked?R([...U,e.id]):R(U.filter(t=>t!==e.id))},className:"h-4 w-4 rounded border-gray-300"}),(0,a.jsxs)("label",{htmlFor:e.id,className:"flex-1 cursor-pointer",children:[(0,a.jsx)("div",{className:"font-medium",children:e.title}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.description}),(0,a.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:[(0,a.jsxs)("span",{className:"mr-3",children:[e.date," at ",e.time]}),(0,a.jsx)("span",{children:e.location})]})]})]},e.id)),0===_.length&&(0,a.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No workshops available to assign."})]})}),(0,a.jsxs)(c.Es,{children:[(0,a.jsx)(r.$,{variant:"outline",onClick:()=>{C(!1),R([])},children:"Cancel"}),(0,a.jsxs)(r.$,{onClick:async()=>{if(F){for(let e of U)await er(F.id,e);C(!1),R([])}},disabled:0===U.length,className:"bg-[#026FB4] hover:bg-[#025a91] text-white",children:["Assign Selected Workshops (",U.length,")"]})]})]})})]})}},29953:(e,t,s)=>{"use strict";s.d(t,{W:()=>i});var a=s(95155),l=s(16559);let i=e=>{let{open:t,onClose:s,onConfirm:i,title:r,description:n}=e;return(0,a.jsx)(l.Lt,{open:t,children:(0,a.jsxs)(l.EO,{children:[(0,a.jsxs)(l.wd,{children:[(0,a.jsx)(l.r7,{children:r}),(0,a.jsx)(l.$v,{children:n})]}),(0,a.jsxs)(l.ck,{children:[(0,a.jsx)(l.Zr,{onClick:s,children:"Cancel"}),(0,a.jsx)(l.Rx,{onClick:i,className:"bg-[#026FB4] hover:bg-[#025a91]",children:"Confirm"})]})]})})}},59814:(e,t,s)=>{Promise.resolve().then(s.bind(s,16671))},61204:(e,t,s)=>{"use strict";s.d(t,{f:()=>a});let a="https://api.rwandafutureskillsforum.rtbdev.online"},92981:(e,t,s)=>{"use strict";s.d(t,{G6:()=>d,WG:()=>n,fE:()=>o,gf:()=>i,ve:()=>r,zu:()=>c});let a="access",l="refresh_token",i=()=>localStorage.getItem(a),r=()=>localStorage.getItem(l),n=e=>{localStorage.setItem(a,e)},o=e=>{localStorage.setItem(l,e)},c=()=>{localStorage.removeItem(a),localStorage.removeItem(l)},d=()=>{let e=i();if(!e)return!1;try{let t=JSON.parse(atob(e.split(".")[1])),s=1e3*t.exp;return Date.now()<s}catch(e){return console.error("Error checking token validity:",e),!1}}}},e=>{var t=t=>e(e.s=t);e.O(0,[2848,6671,1478,5364,8698,4358,3542,3363,7614,8441,1684,7358],()=>t(59814)),_N_E=e.O()}]);