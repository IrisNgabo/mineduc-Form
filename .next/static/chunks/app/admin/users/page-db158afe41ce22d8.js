(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8733],{24904:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>S});var t=r(95155),a=r(12115),l=r(47924),n=r(19946);let o=(0,n.A)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),i=(0,n.A)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);var d=r(92657),c=r(13717),m=r(74126),h=r(69663),x=r(97168),u=r(89852),f=r(88145),j=r(53999),p=r(65453);let g=(0,p.v)(e=>({isOpen:!1,user:null,openEditUser:s=>e({isOpen:!0,user:s}),closeEditUser:()=>e({isOpen:!1,user:null})})),b=(0,p.v)(e=>({isOpen:!1,user:null,openDeleteUser:s=>e({isOpen:!0,user:s}),closeDeleteUser:()=>e({isOpen:!1,user:null})}));var N=r(56671),v=r(92981),w=r(61204);function y(e){let{refreshUsers:s}=e,[r,n]=(0,a.useState)([]),[p,y]=(0,a.useState)(!0),[C,F]=(0,a.useState)(null),[E,k]=(0,a.useState)(""),[B,R]=(0,a.useState)("list"),[O,I]=(0,a.useState)(1),[M,A]=(0,a.useState)(null),{openEditUser:L}=g(),{openDeleteUser:z}=b(),U=async()=>{try{y(!0),F(null);let e=(0,v.gf)();if(!e){console.error("No token available"),N.o.error("Your session has expired. Please login again."),window.location.href="/login";return}let s=await fetch("".concat(w.f,"/users/all"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},cache:"no-cache"});if(!s.ok){if(401===s.status){N.o.error("Your session has expired. Please login again."),window.location.href="/login";return}throw Error("HTTP error! status: ".concat(s.status))}let r=await s.json();if(console.log("Fetched users:",r),!Array.isArray(r))throw Error("Invalid response format: expected an array of users");let t=r.filter(e=>e.roles.some(e=>"COORDINATOR"===e.role_name||"EVENT_ORGANIZER"===e.role_name));n(t)}catch(s){console.error("Error fetching users:",s);let e=s instanceof Error?s.message:"Failed to fetch users";F(e),N.o.error(e)}finally{y(!1)}};(0,a.useEffect)(()=>{U()},[s]);let T=e=>{N.o.info("Viewing ".concat(e.firstName," ").concat(e.lastName,"'s profile"))},_=()=>{U(),N.o.success("User list refreshed")},D=r.filter(e=>{let s=e.firstName.toLowerCase().includes(E.toLowerCase())||e.lastName.toLowerCase().includes(E.toLowerCase())||e.email.toLowerCase().includes(E.toLowerCase())||e.username.toLowerCase().includes(E.toLowerCase()),r=!M||e.roles.some(e=>e.role_name===M);return s&&r}),S=5*O,V=S-5,J=D.slice(V,S),G=Math.ceil(D.length/5),P=e=>{I(e)},$=e=>{M===e?A(null):A(e)},Y=e=>{switch(e){case"EVENT_ORGANIZER":return{bg:"bg-emerald-500",bgLight:"bg-emerald-50",text:"text-emerald-600",border:"border-emerald-200",ring:"ring-emerald-500/30",gradient:"from-emerald-500 to-teal-600"};case"COORDINATOR":return{bg:"bg-[#026FB4]",bgLight:"bg-[#EBF5FF]",text:"text-[#026FB4]",border:"border-[#026FB4]",ring:"ring-[#026FB4]/30",gradient:"from-[#026FB4] to-[#0284d3]"};default:return{bg:"bg-slate-400",bgLight:"bg-slate-50",text:"text-slate-600",border:"border-slate-200",ring:"ring-slate-400/30",gradient:"from-slate-400 to-slate-500"}}};return(0,t.jsxs)("div",{className:"w-full space-y-8",children:[p&&(0,t.jsxs)("div",{className:"flex flex-col justify-center items-center py-16 space-y-4",children:[(0,t.jsxs)("div",{className:"relative h-16 w-16",children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-t-[#026FB4] border-r-[#026FB4]/30 border-b-[#026FB4]/10 border-l-[#026FB4]/30 animate-spin"}),(0,t.jsx)("div",{className:"absolute inset-3 rounded-full border-4 border-t-transparent border-r-transparent border-b-[#026FB4] border-l-transparent animate-spin"})]}),(0,t.jsx)("p",{className:"text-base text-slate-500 font-medium",children:"Loading users..."})]}),C&&!p&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[(0,t.jsx)("div",{className:"h-16 w-16 rounded-full bg-red-50 flex items-center justify-center mb-6",children:(0,t.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M12 9V14M12 17.5V17.51M6.6 21H17.4C18.8 21 19.5 21 20.054 20.782C20.5348 20.5903 20.9297 20.2653 21.1925 19.846C21.5 19.3624 21.5 18.7235 21.5 17.4457V6.5543C21.5 5.2765 21.5 4.6376 21.1925 4.154C20.9297 3.7347 20.5348 3.4097 20.054 3.218C19.5 3 18.8 3 17.4 3H6.6C5.2 3 4.5 3 3.946 3.218C3.4652 3.4097 3.0703 3.7347 2.8075 4.154C2.5 4.6376 2.5 5.2765 2.5 6.5543V17.4457C2.5 18.7235 2.5 19.3624 2.8075 19.846C3.0703 20.2653 3.4652 20.5903 3.946 20.782C4.5 21 5.2 21 6.6 21Z",stroke:"#EF4444",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-3",children:"Error Loading Users"}),(0,t.jsx)("p",{className:"text-base text-center text-slate-500 max-w-md",children:C}),(0,t.jsx)(x.$,{onClick:_,className:"mt-8 bg-[#026FB4] hover:bg-[#026FB4]/90 text-base px-6 py-6 h-auto",children:"Try Again"})]}),!p&&!C&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"rounded-xl border-0 bg-gradient-to-br from-white to-slate-50 shadow-lg",children:(0,t.jsx)("div",{className:"p-5 sm:p-6",children:(0,t.jsxs)("div",{className:"flex flex-col gap-5 sm:flex-row sm:items-center",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(l.A,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-slate-400"}),(0,t.jsx)(u.p,{placeholder:"Search users...",className:"pl-12 py-6 text-base bg-white focus-visible:ring-[#026FB4] border-slate-200 rounded-xl shadow-sm",value:E,onChange:e=>k(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(x.$,{variant:"outline",size:"icon",className:(0,j.cn)("h-12 w-12 rounded-full border-slate-200 transition-all duration-200 text-base font-semibold shadow-sm","COORDINATOR"===M?"bg-gradient-to-br from-[#026FB4] to-[#0284d3] text-white border-0":"bg-white hover:bg-[#EBF5FF] hover:text-[#026FB4]"),onClick:()=>$("COORDINATOR"),children:"C"}),(0,t.jsx)(x.$,{variant:"outline",size:"icon",className:(0,j.cn)("h-12 w-12 rounded-full border-slate-200 transition-all duration-200 text-base font-semibold shadow-sm","EVENT_ORGANIZER"===M?"bg-gradient-to-br from-emerald-500 to-teal-600 text-white border-0":"bg-white hover:bg-emerald-50 hover:text-emerald-600"),onClick:()=>$("EVENT_ORGANIZER"),children:"E"}),(0,t.jsx)(x.$,{variant:"outline",size:"icon",className:"h-12 w-12 rounded-full border-slate-200 bg-white hover:bg-[#EBF5FF] hover:text-[#026FB4] transition-all duration-200 shadow-sm",onClick:_,children:"R"})]})]})})}),(0,t.jsxs)("div",{className:"rounded-xl border-0 bg-white shadow-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center p-5 sm:p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:[(0,t.jsxs)("div",{className:"text-base font-medium text-slate-700",children:[D.length," ",1===D.length?"User":"Users"," ",M?"(".concat(M,")"):""]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-slate-100 p-1 rounded-lg",children:[(0,t.jsx)(x.$,{variant:"ghost",size:"icon",className:(0,j.cn)("h-10 w-10 rounded-md transition-all duration-200","grid"===B?"bg-white text-[#026FB4] shadow-sm":"text-slate-500 hover:text-[#026FB4]"),onClick:()=>R("grid"),children:(0,t.jsx)(o,{className:"h-5 w-5"})}),(0,t.jsx)(x.$,{variant:"ghost",size:"icon",className:(0,j.cn)("h-10 w-10 rounded-md transition-all duration-200","list"===B?"bg-white text-[#026FB4] shadow-sm":"text-slate-500 hover:text-[#026FB4]"),onClick:()=>R("list"),children:(0,t.jsx)(i,{className:"h-5 w-5"})})]})})]}),(0,t.jsxs)("div",{className:"p-5 sm:p-6",children:[(0,t.jsx)("div",{className:(0,j.cn)("space-y-4","grid"===B&&"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 space-y-0"),children:J.map(e=>{var s;let r=(null==(s=e.roles[0])?void 0:s.role_name)||"NO_ROLE",a=Y(r);return(0,t.jsxs)("div",{className:(0,j.cn)("group flex flex-col gap-5 rounded-xl bg-white p-5 border-0 hover:shadow-xl transition-all duration-300","list"===B?"sm:flex-row sm:items-center sm:justify-between":"h-full","shadow-md hover:shadow-[#026FB4]/10"),children:[(0,t.jsxs)("div",{className:(0,j.cn)("flex items-center gap-5","grid"===B&&"flex-col text-center sm:flex-row sm:text-left"),children:[(0,t.jsxs)("div",{className:(0,j.cn)("relative","grid"===B&&"mx-auto sm:mx-0"),children:[(0,t.jsx)(h.eu,{className:(0,j.cn)("ring-4 ring-transparent group-hover:ring-[#026FB4]/10 transition-all duration-300","grid"===B?"h-20 w-20":"h-14 w-14 sm:h-16 sm:w-16"),children:(0,t.jsx)(h.q5,{className:(0,j.cn)("font-semibold bg-gradient-to-br text-white","from-".concat(a.gradient),"grid"===B?"text-2xl":"text-lg"),children:e.firstName[0]+e.lastName[0]})}),(0,t.jsx)("div",{className:(0,j.cn)("absolute -bottom-1 -right-1 h-6 w-6 rounded-full border-2 border-white",a.bg)})]}),(0,t.jsxs)("div",{className:(0,j.cn)("flex flex-col gap-1","grid"===B&&"w-full"),children:[(0,t.jsxs)("span",{className:(0,j.cn)("font-semibold text-base sm:text-lg text-slate-900 group-hover:text-[#026FB4] transition-colors duration-200","grid"===B&&"mt-2"),children:[e.firstName," ",e.lastName]}),(0,t.jsx)("span",{className:"text-sm text-slate-500",children:e.email}),(0,t.jsxs)("div",{className:(0,j.cn)("flex items-center gap-2 mt-2","grid"===B&&"justify-center sm:justify-start"),children:[(0,t.jsx)(f.E,{className:(0,j.cn)("px-3 py-1 text-sm font-medium rounded-full",a.bgLight,a.text,a.border),children:r}),(0,t.jsx)(f.E,{variant:"outline",className:"px-3 py-1 text-sm font-medium rounded-full border-slate-200 text-slate-500",children:e.phonenumber||"No Phone"})]})]})]}),(0,t.jsxs)("div",{className:(0,j.cn)("flex items-center gap-3","list"===B?"sm:gap-4 justify-end":"justify-center sm:justify-end mt-3"),children:[(0,t.jsxs)(x.$,{variant:"ghost",size:"sm",className:"h-10 rounded-lg text-sm font-medium text-slate-600 hover:bg-[#EBF5FF] hover:text-[#026FB4]",onClick:()=>T(e),children:[(0,t.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"View"]}),(0,t.jsxs)(x.$,{variant:"ghost",size:"sm",className:"h-10 rounded-lg text-sm font-medium text-slate-600 hover:bg-[#EBF5FF] hover:text-[#026FB4]",onClick:()=>L(e),children:[(0,t.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,t.jsxs)(x.$,{variant:"ghost",size:"sm",className:"h-10 rounded-lg text-sm font-medium text-rose-600 hover:bg-rose-50",onClick:()=>z(e),children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]},e.id)})}),0===D.length&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[(0,t.jsx)("div",{className:"h-20 w-20 rounded-full bg-slate-50 flex items-center justify-center mb-6",children:(0,t.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M21 21L15.0001 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z",stroke:"#94A3B8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-slate-900 mb-3",children:"No users found"}),(0,t.jsx)("p",{className:"text-base text-center text-slate-500 max-w-md",children:E?'No users match your search "'.concat(E,'"'):M?"No users with the ".concat(M," role found"):"No users available"}),(E||M)&&(0,t.jsx)(x.$,{onClick:()=>{k(""),A(null)},variant:"outline",className:"mt-8 text-base px-6 py-6 h-auto",children:"Clear Filters"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between border-t border-slate-100 p-5 sm:p-6 bg-gradient-to-r from-slate-50 to-white",children:[(0,t.jsx)("div",{className:"text-sm text-slate-600 text-center sm:text-left bg-slate-100 px-4 py-2 rounded-full font-medium",children:D.length>0?"".concat(V+1,"-").concat(Math.min(S,D.length)," of ").concat(D.length," ").concat(1===D.length?"User":"Users"):"0 Users"}),D.length>0&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)(x.$,{variant:"outline",size:"icon",className:"h-10 w-10 rounded-full border-slate-200 hover:bg-[#EBF5FF] hover:text-[#026FB4] transition-all duration-200",onClick:()=>P(Math.max(1,O-1)),disabled:1===O,children:(0,t.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,t.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[Array.from({length:Math.min(G,5)},(e,s)=>{let r=s+1;return(0,t.jsx)(x.$,{variant:O===r?"default":"outline",size:"icon",className:(0,j.cn)("h-10 w-10 rounded-full border-slate-200 transition-all duration-200 font-medium",O===r?"bg-gradient-to-br from-[#026FB4] to-[#0284d3] hover:from-[#026FB4]/90 hover:to-[#0284d3]/90 text-white border-0":"hover:bg-[#EBF5FF] hover:text-[#026FB4]"),onClick:()=>P(r),children:r},r)}),G>5&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.$,{variant:"ghost",size:"icon",className:"h-10 w-10 text-slate-400 cursor-default",children:"..."}),(0,t.jsx)(x.$,{variant:"outline",size:"icon",className:"h-10 w-10 rounded-full border-slate-200 hover:bg-[#EBF5FF] hover:text-[#026FB4] transition-all duration-200 font-medium",onClick:()=>P(G),children:G})]})]}),(0,t.jsx)("div",{className:"sm:hidden bg-slate-100 px-4 py-2 rounded-full",children:(0,t.jsxs)("span",{className:"text-sm text-slate-600 font-medium",children:[O,"/",G]})}),(0,t.jsx)(x.$,{variant:"outline",size:"icon",className:"h-10 w-10 rounded-full border-slate-200 hover:bg-[#EBF5FF] hover:text-[#026FB4] transition-all duration-200",onClick:()=>P(Math.min(G,O+1)),disabled:O===G,children:(0,t.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M9 6L15 12L9 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]})]})]})}var C=r(84616),F=r(62177),E=r(90221),k=r(55594),B=r(99840),R=r(30070),O=r(95784),I=r(96807);let M=k.Ik({firstName:k.Yj().min(2,"First name must be at least 2 characters"),lastName:k.Yj().min(2,"Last name must be at least 2 characters"),email:k.Yj().email("Invalid email address"),username:k.Yj().min(3,"Username must be at least 3 characters"),myGender:k.k5(["Male","Female"]),role:k.k5(["COORDINATOR","EVENT_ORGANIZER"]),national_id:k.Yj().min(16,"National ID must be 16 characters"),phonenumber:k.Yj().min(10,"Phone number must be at least 10 characters")});function A(e){let{refreshUsers:s}=e,{isOpen:r,closeAddUser:a}=(0,I.h)(),l=(0,F.mN)({resolver:(0,E.u)(M),defaultValues:{firstName:"",lastName:"",email:"",username:"",myGender:"Male",role:"COORDINATOR",national_id:"",phonenumber:""},mode:"onChange"}),n=async e=>{try{let r=(0,v.gf)();if(console.log("Token from localStorage:",r),!r){console.error("No token available"),N.o.error("Your session has expired. Please login again."),window.location.href="/login";return}let n=await fetch("".concat(w.f,"/users/create/user"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(e)});console.log("Create user response status:",n.status);let o=await n.json();if(console.log("Create user response data:",o),n.ok)N.o.success((0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"User created successfully!"}),(0,t.jsxs)("p",{className:"text-sm mt-1",children:["Verification code: ",o.token]}),(0,t.jsxs)("p",{className:"text-sm",children:["Temporary password: ",o.password]})]})),a(),l.reset(),s();else if(401===n.status)N.o.error("Your session has expired. Please login again."),window.location.href="/login";else throw Error(o.message||"Failed to create user")}catch(e){console.error("Error creating user:",e),N.o.error(e instanceof Error?e.message:"Failed to create user")}};return(0,t.jsx)(B.lG,{open:r,onOpenChange:a,children:(0,t.jsxs)(B.Cf,{className:"sm:max-w-[600px]",children:[(0,t.jsxs)(B.c7,{children:[(0,t.jsx)(B.L3,{children:"Add New User"}),(0,t.jsx)(B.rr,{children:"Fill in the following form to add a user."})]}),(0,t.jsx)(R.lV,{...l,children:(0,t.jsxs)("form",{onSubmit:l.handleSubmit(n),className:"space-y-4",children:[(0,t.jsx)(R.zB,{control:l.control,name:"firstName",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"First Name"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(u.p,{placeholder:"Enter first name",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:l.control,name:"lastName",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Last Name"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(u.p,{placeholder:"Enter last name",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:l.control,name:"email",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Email"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(u.p,{placeholder:"Enter email",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:l.control,name:"username",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Username"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(u.p,{placeholder:"Enter username",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:l.control,name:"myGender",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Gender"}),(0,t.jsxs)(O.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(R.MJ,{children:(0,t.jsx)(O.bq,{children:(0,t.jsx)(O.yv,{placeholder:"Select gender"})})}),(0,t.jsxs)(O.gC,{children:[(0,t.jsx)(O.eb,{value:"Male",children:"Male"}),(0,t.jsx)(O.eb,{value:"Female",children:"Female"})]})]}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:l.control,name:"role",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Role"}),(0,t.jsxs)(O.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(R.MJ,{children:(0,t.jsx)(O.bq,{children:(0,t.jsx)(O.yv,{placeholder:"Select role"})})}),(0,t.jsxs)(O.gC,{children:[(0,t.jsx)(O.eb,{value:"COORDINATOR",children:"Coordinator"}),(0,t.jsx)(O.eb,{value:"EVENT_ORGANIZER",children:"Event Organizer"})]})]}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:l.control,name:"national_id",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"National ID"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(u.p,{placeholder:"Enter national ID",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:l.control,name:"phonenumber",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Phone Number"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(u.p,{placeholder:"Enter phone number",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(x.$,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),(0,t.jsx)(x.$,{type:"submit",className:"bg-blue-500 hover:bg-blue-600",children:"Add"})]})]})})]})})}let L=k.Ik({firstName:k.Yj().min(2,"First name must be at least 2 characters"),lastName:k.Yj().min(2,"Last name must be at least 2 characters"),email:k.Yj().email("Invalid email address"),username:k.Yj().min(3,"Username must be at least 3 characters"),myGender:k.k5(["Male","Female"]),role:k.k5(["COORDINATOR","EVENT_ORGANIZER"]),national_id:k.Yj().min(16,"National ID must be 16 characters"),phonenumber:k.Yj().min(10,"Phone number must be at least 10 characters")});function z(e){let{refreshUsers:s}=e,{isOpen:r,closeEditUser:l,user:n}=g(),o=(0,F.mN)({resolver:(0,E.u)(L),defaultValues:{firstName:"",lastName:"",email:"",username:"",myGender:"Male",role:"COORDINATOR",national_id:"",phonenumber:""},mode:"onChange"}),i=e=>0===e?"Male":"Female";(0,a.useEffect)(()=>{if(n){var e,s;console.log("Editing user:",n);let r=(null==(s=n.roles)||null==(e=s[0])?void 0:e.role_name)||"COORDINATOR";o.reset({firstName:n.firstName||"",lastName:n.lastName||"",email:n.email||"",username:n.username||"",myGender:i(+n.gender),role:r,national_id:n.national_id||"",phonenumber:n.phonenumber||""})}},[n,o]);let d=async e=>{try{let r=(0,v.gf)();if(console.log("Token from localStorage:",r),!r){console.error("No token available"),N.o.error("Your session has expired. Please login again."),window.location.href="/login";return}if(!(null==n?void 0:n.id))return void N.o.error("No user selected for editing");let t={...n,firstName:e.firstName,lastName:e.lastName,email:e.email,username:e.username,gender:e.myGender,roles:[{role_name:e.role}],national_id:e.national_id,phonenumber:e.phonenumber};console.log("Update user request body:",t);let a=await fetch("".concat(w.f,"/users/update/").concat(n.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(t)});console.log("Update user response status:",a.status);let i=await a.json();if(console.log("Update user response data:",i),a.ok)N.o.success("User updated successfully!"),l(),o.reset(),s();else if(401===a.status)N.o.error("Your session has expired. Please login again."),window.location.href="/login";else throw Error(i.message||"Failed to update user")}catch(e){console.error("Error updating user:",e),N.o.error(e instanceof Error?e.message:"Failed to update user")}};return(0,t.jsx)(B.lG,{open:r,onOpenChange:l,children:(0,t.jsxs)(B.Cf,{className:"sm:max-w-[600px]",children:[(0,t.jsxs)(B.c7,{children:[(0,t.jsx)(B.L3,{children:"Edit User"}),(0,t.jsx)(B.rr,{children:"Update the user information below."})]}),(0,t.jsx)(R.lV,{...o,children:(0,t.jsxs)("form",{onSubmit:o.handleSubmit(d),className:"space-y-4",children:[(0,t.jsx)(R.zB,{control:o.control,name:"firstName",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"First Name"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(u.p,{placeholder:"Enter first name",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:o.control,name:"lastName",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Last Name"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(u.p,{placeholder:"Enter last name",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:o.control,name:"email",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Email"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(u.p,{placeholder:"Enter email",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:o.control,name:"username",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Username"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(u.p,{placeholder:"Enter username",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:o.control,name:"myGender",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Gender"}),(0,t.jsxs)(O.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(R.MJ,{children:(0,t.jsx)(O.bq,{children:(0,t.jsx)(O.yv,{placeholder:"Select gender"})})}),(0,t.jsxs)(O.gC,{children:[(0,t.jsx)(O.eb,{value:"Male",children:"Male"}),(0,t.jsx)(O.eb,{value:"Female",children:"Female"})]})]}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:o.control,name:"role",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Role"}),(0,t.jsxs)(O.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(R.MJ,{children:(0,t.jsx)(O.bq,{children:(0,t.jsx)(O.yv,{placeholder:"Select role"})})}),(0,t.jsxs)(O.gC,{children:[(0,t.jsx)(O.eb,{value:"COORDINATOR",children:"Coordinator"}),(0,t.jsx)(O.eb,{value:"EVENT_ORGANIZER",children:"Event Organizer"})]})]}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:o.control,name:"national_id",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"National ID"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(u.p,{placeholder:"Enter national ID",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsx)(R.zB,{control:o.control,name:"phonenumber",render:e=>{let{field:s}=e;return(0,t.jsxs)(R.eI,{children:[(0,t.jsx)(R.lR,{children:"Phone Number"}),(0,t.jsx)(R.MJ,{children:(0,t.jsx)(u.p,{placeholder:"Enter phone number",...s})}),(0,t.jsx)(R.C5,{})]})}}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(x.$,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),(0,t.jsx)(x.$,{type:"submit",className:"bg-blue-500 hover:bg-blue-600",children:"Update"})]})]})})]})})}function U(e){let{refreshUsers:s}=e,{isOpen:r,user:a,closeDeleteUser:l}=b(),n=async()=>{try{if(!a)return void N.o.error("No user selected for deletion");let e=(0,v.gf)();if(!e){N.o.error("Your session has expired. Please login again."),window.location.href="/login";return}let r=await fetch("".concat(w.f,"/users/delete/").concat(a.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),accept:"*/*"}});if(!r.ok){if(401===r.status){N.o.error("Your session has expired. Please login again."),window.location.href="/login";return}let e=await r.json();throw Error(e.message||"Failed to delete user")}let t=await r.json();console.log("Deleted user:",t),N.o.success("Successfully deleted user ".concat(t.firstName," ").concat(t.lastName)),s(),l()}catch(e){console.error("Error deleting user:",e),N.o.error(e instanceof Error?e.message:"Failed to delete user")}};return(0,t.jsx)(B.lG,{open:r,onOpenChange:l,children:(0,t.jsxs)(B.Cf,{className:"sm:max-w-md",children:[(0,t.jsxs)(B.c7,{className:"flex items-center",children:[(0,t.jsx)(B.L3,{className:"text-xl font-semibold",children:"Delete User"}),(0,t.jsx)(x.$,{onClick:l,variant:"ghost",className:"absolute right-4 top-4 h-6 w-6 rounded-full p-0","aria-label":"Close"})]}),(0,t.jsxs)("div",{className:"px-1 py-4 text-center",children:[(0,t.jsx)("div",{className:"mx-auto mb-4 flex h-24 w-24 items-center justify-center",children:(0,t.jsxs)("svg",{width:"100",height:"100",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M40 20H60C60 17.3478 58.9464 14.8043 56.8284 12.9289C54.7105 11.0536 51.8261 10 48.8372 10H51.1628C48.1739 10 45.2895 11.0536 43.1716 12.9289C41.0536 14.8043 40 17.3478 40 20Z",fill:"#D9D9D9"}),(0,t.jsx)("path",{d:"M75 20H25C23.6739 20 22.4021 20.5268 21.4645 21.4645C20.5268 22.4021 20 23.6739 20 25C20 26.3261 20.5268 27.5979 21.4645 28.5355C22.4021 29.4732 23.6739 30 25 30H75C76.3261 30 77.5979 29.4732 78.5355 28.5355C79.4732 27.5979 80 26.3261 80 25C80 23.6739 79.4732 22.4021 78.5355 21.4645C77.5979 20.5268 76.3261 20 75 20Z",fill:"#D9D9D9"}),(0,t.jsx)("path",{d:"M31.25 40L35.75 80C35.75 83.9782 37.3348 87.7936 40.1477 90.6066C42.9607 93.4196 46.7761 95.0044 50.7543 95.0044C54.7325 95.0044 58.5479 93.4196 61.3609 90.6066C64.1739 87.7936 65.7587 83.9782 65.7587 80L70.2587 40",fill:"#F4AAAA"}),(0,t.jsx)("path",{d:"M43.75 50L45 70",stroke:"white",strokeWidth:"5",strokeLinecap:"round"}),(0,t.jsx)("path",{d:"M57.5 50L56.25 70",stroke:"white",strokeWidth:"5",strokeLinecap:"round"})]})}),(0,t.jsx)("p",{className:"mb-2 text-lg font-semibold text-gray-700",children:"Are you sure?"}),(0,t.jsxs)("p",{className:"mb-6 text-gray-600",children:["Do you really want to delete ",a?"".concat(a.firstName," ").concat(a.lastName):"this user","? This action cannot be undone."]}),(0,t.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,t.jsx)(x.$,{type:"button",variant:"outline",onClick:l,className:"min-w-24",children:"Cancel"}),(0,t.jsx)(x.$,{type:"button",className:"bg-red-500 hover:bg-red-600 min-w-24",onClick:n,children:"Delete"})]})]})]})})}var T=r(88482),_=r(87620);function D(e){let{title:s}=e;return(0,t.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:s}),(0,t.jsx)(_.F,{})]})}function S(){let{openAddUser:e}=(0,I.h)(),[s,r]=(0,a.useState)(0),l=()=>{r(e=>e+1)};return(0,t.jsxs)("div",{children:[(0,t.jsx)(D,{title:"Users"}),(0,t.jsxs)(T.Zp,{className:"p-6 border-t-4 border-t-[#026FB4]",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold sm:text-xl",children:"Users"}),(0,t.jsxs)(x.$,{className:"flex w-full items-center justify-center gap-2 bg-[#026FB4] hover:bg-[#026FB4]/90 sm:w-auto",onClick:e,children:[(0,t.jsx)(C.A,{className:"h-4 w-4"}),"Add User"]})]}),(0,t.jsx)("div",{className:"rounded-md border overflow-hidden",children:(0,t.jsx)(y,{refreshUsers:l})})]}),(0,t.jsx)(A,{refreshUsers:l}),(0,t.jsx)(z,{refreshUsers:l}),(0,t.jsx)(U,{refreshUsers:l})]})}},30070:(e,s,r)=>{"use strict";r.d(s,{C5:()=>p,MJ:()=>j,eI:()=>u,lR:()=>f,lV:()=>d,zB:()=>m});var t=r(95155),a=r(12115),l=r(99708),n=r(62177),o=r(53999),i=r(82714);let d=n.Op,c=a.createContext({}),m=e=>{let{...s}=e;return(0,t.jsx)(c.Provider,{value:{name:s.name},children:(0,t.jsx)(n.xI,{...s})})},h=()=>{let e=a.useContext(c),s=a.useContext(x),{getFieldState:r}=(0,n.xW)(),t=(0,n.lN)({name:e.name}),l=r(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=s;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...l}},x=a.createContext({});function u(e){let{className:s,...r}=e,l=a.useId();return(0,t.jsx)(x.Provider,{value:{id:l},children:(0,t.jsx)("div",{"data-slot":"form-item",className:(0,o.cn)("grid gap-2",s),...r})})}function f(e){let{className:s,...r}=e,{error:a,formItemId:l}=h();return(0,t.jsx)(i.J,{"data-slot":"form-label","data-error":!!a,className:(0,o.cn)("data-[error=true]:text-destructive",s),htmlFor:l,...r})}function j(e){let{...s}=e,{error:r,formItemId:a,formDescriptionId:n,formMessageId:o}=h();return(0,t.jsx)(l.DX,{"data-slot":"form-control",id:a,"aria-describedby":r?"".concat(n," ").concat(o):"".concat(n),"aria-invalid":!!r,...s})}function p(e){var s;let{className:r,...a}=e,{error:l,formMessageId:n}=h(),i=l?String(null!=(s=null==l?void 0:l.message)?s:""):a.children;return i?(0,t.jsx)("p",{"data-slot":"form-message",id:n,className:(0,o.cn)("text-destructive text-sm",r),...a,children:i}):null}},62443:(e,s,r)=>{Promise.resolve().then(r.bind(r,24904))},74126:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(19946).A)("trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},82714:(e,s,r)=>{"use strict";r.d(s,{J:()=>o});var t=r(95155),a=r(12115),l=r(40968),n=r(53999);let o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.b,{ref:s,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...a})});o.displayName=l.b.displayName},88482:(e,s,r)=>{"use strict";r.d(s,{BT:()=>i,Wu:()=>d,ZB:()=>o,Zp:()=>l,aR:()=>n});var t=r(95155);r(12115);var a=r(53999);function l(e){let{className:s,...r}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...r})}function n(e){let{className:s,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...r})}function o(e){let{className:s,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",s),...r})}function i(e){let{className:s,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",s),...r})}function d(e){let{className:s,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",s),...r})}},92981:(e,s,r)=>{"use strict";r.d(s,{G6:()=>c,WG:()=>o,fE:()=>i,gf:()=>l,ve:()=>n,zu:()=>d});let t="access",a="refresh_token",l=()=>localStorage.getItem(t),n=()=>localStorage.getItem(a),o=e=>{localStorage.setItem(t,e)},i=e=>{localStorage.setItem(a,e)},d=()=>{localStorage.removeItem(t),localStorage.removeItem(a)},c=()=>{let e=l();if(!e)return!1;try{let s=JSON.parse(atob(e.split(".")[1])),r=1e3*s.exp;return Date.now()<r}catch(e){return console.error("Error checking token validity:",e),!1}}},95784:(e,s,r)=>{"use strict";r.d(s,{bq:()=>h,eb:()=>j,gC:()=>f,l6:()=>c,yv:()=>m});var t=r(95155),a=r(12115),l=r(31992),n=r(66474),o=r(47863),i=r(5196),d=r(53999);let c=l.bL;l.YJ;let m=l.WT,h=a.forwardRef((e,s)=>{let{className:r,children:a,...o}=e;return(0,t.jsxs)(l.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...o,children:[a,(0,t.jsx)(l.In,{asChild:!0,children:(0,t.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});h.displayName=l.l9.displayName;let x=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.PP,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,t.jsx)(o.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let u=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.wn,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})});u.displayName=l.wn.displayName;let f=a.forwardRef((e,s)=>{let{className:r,children:a,position:n="popper",...o}=e;return(0,t.jsx)(l.ZL,{children:(0,t.jsxs)(l.UC,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...o,children:[(0,t.jsx)(x,{}),(0,t.jsx)(l.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,t.jsx)(u,{})]})})});f.displayName=l.UC.displayName,a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.JU,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=l.JU.displayName;let j=a.forwardRef((e,s)=>{let{className:r,children:a,...n}=e;return(0,t.jsxs)(l.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(l.VF,{children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})}),(0,t.jsx)(l.p4,{children:a})]})});j.displayName=l.q7.displayName,a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(l.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=l.wv.displayName},96807:(e,s,r)=>{"use strict";r.d(s,{h:()=>t});let t=(0,r(65453).v)(e=>({isOpen:!1,openAddUser:()=>e({isOpen:!0}),closeAddUser:()=>e({isOpen:!1})}))}},e=>{var s=s=>e(e.s=s);e.O(0,[2848,6671,1478,5364,8698,4358,5521,4205,329,8441,1684,7358],()=>s(62443)),_N_E=e.O()}]);