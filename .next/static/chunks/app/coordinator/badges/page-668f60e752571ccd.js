(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{6737:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>k});var r=l(95155),a=l(12115),o=l(89852),s=l(97168),n=l(88482),i=l(47924),c=l(91788),d=l(81586),f=l(42355),h=l(13052),m=l(66766),x=l(87620),g=l(6874),u=l.n(g),p=l(95784),v=l(59311),w=l.n(v),y=l(92981),b=l(56671),j=l(61204);let N=e=>{let{user:t,side:l="front"}=e,a={gradient:{background:"linear-gradient(180deg, rgb(2, 111, 180) 0%, rgb(0, 51, 102) 100%)",padding:"10mm"},container:{width:"148mm",height:"210mm",position:"relative"},whiteBackground:{backgroundColor:"#ffffff"},primaryText:{color:"#026FB4"},grayText:{color:"#4B5563"},border:{border:"4px solid #026FB4"},primaryBackground:{backgroundColor:"#026FB4"},whiteText:{color:"#ffffff"}};return"front"===l?(0,r.jsx)("div",{className:"badge-container",style:a.container,children:(0,r.jsx)("div",{className:"relative w-full h-full",children:(0,r.jsx)("div",{className:"absolute inset-0",style:a.gradient,children:(0,r.jsxs)("div",{className:"w-full h-full rounded-lg p-8 flex flex-col items-center justify-between",style:a.whiteBackground,children:[(0,r.jsx)("div",{className:"flex justify-center mt-8",children:(0,r.jsx)("div",{className:"relative w-[40mm] h-[40mm]",children:(0,r.jsx)("div",{className:"absolute inset-0 rounded-full overflow-hidden",style:a.border,children:(0,r.jsx)(m.default,{src:t.profile_picture_url||"/man.svg",alt:"".concat(t.firstName," ").concat(t.lastName),fill:!0,className:"rounded-full object-cover",priority:!0})})})}),(0,r.jsxs)("div",{className:"text-center space-y-4 mt-8",children:[(0,r.jsxs)("h2",{className:"text-[24pt] font-bold",style:a.primaryText,children:[t.firstName," ",t.lastName]}),(0,r.jsx)("p",{className:"text-[18pt]",style:a.grayText,children:t.position}),(0,r.jsx)("p",{className:"text-[16pt]",style:a.grayText,children:t.organization})]}),(0,r.jsx)("div",{className:"mt-8 mb-8 w-full max-w-[80%]",children:(0,r.jsx)("div",{className:"py-3 px-6 rounded-full text-center",style:{...a.primaryBackground,...a.whiteText},children:(0,r.jsx)("p",{className:"text-[16pt] font-medium",children:t.selected_event})})})]})})})}):(0,r.jsx)("div",{className:"badge-container",style:a.container,children:(0,r.jsx)("div",{className:"relative w-full h-full",children:(0,r.jsx)("div",{className:"absolute inset-0",style:a.gradient,children:(0,r.jsxs)("div",{className:"w-full h-full rounded-lg p-8 flex flex-col items-center justify-center",style:a.whiteBackground,children:[(0,r.jsx)("h2",{className:"text-[20pt] font-bold mb-8",style:a.primaryText,children:"Scan QR Code"}),(0,r.jsx)("div",{className:"w-[60mm] h-[60mm] mb-8",style:a.primaryBackground}),(0,r.jsx)("p",{className:"text-[16pt]",style:a.grayText,children:"For More Information"})]})})})})},B=e=>{let{users:t}=e;return(0,r.jsxs)("div",{className:"print-preview",children:[(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n  @page {\n    size: 148mm 210mm;\n    margin: 0;\n  }\n\n  @media print {\n    html, body {\n      margin: 0;\n      padding: 0;\n      -webkit-print-color-adjust: exact !important;\n      print-color-adjust: exact !important;\n    }\n\n    .no-print {\n      display: none !important;\n    }\n\n    .print-only {\n      display: block !important;\n    }\n\n    .badge-print-container {\n      width: 148mm;\n      height: 210mm;\n      margin: 0;\n      padding: 0;\n      page-break-after: always;\n      position: relative;\n      overflow: hidden;\n      background: white;\n    }\n\n    .badge-content {\n      width: 100%;\n      height: 100%;\n      position: relative;\n    }\n  }\n"}}),t.map((e,t)=>(0,r.jsx)(N,{user:e,side:"front"},t))]})};function k(){let[e,t]=(0,a.useState)([]),[l,g]=(0,a.useState)(!0),[v,N]=(0,a.useState)(null),[k,C]=(0,a.useState)(""),[F,S]=(0,a.useState)("all"),[E,T]=(0,a.useState)(1),[_,A]=(0,a.useState)(!1),[I,L]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{g(!0),N(null);let e=(0,y.gf)();if(!e){N("Your session has expired. Please login again."),b.o.error("Your session has expired. Please login again."),window.location.href="/login";return}let l=await fetch("".concat(j.f,"/delegates"),{headers:{Authorization:"Bearer ".concat(e),accept:"*/*"},cache:"no-store"});if(!l.ok){if(401===l.status){N("Your session has expired. Please login again."),b.o.error("Your session has expired. Please login again."),window.location.href="/login";return}let e=await l.text();throw Error(e||"HTTP error! status: ".concat(l.status))}let r=await l.json();if(console.log("Fetched delegates:",r),!Array.isArray(r))throw Error("Invalid response format: expected an array of delegates");let a=Array.from(new Set(r.map(e=>e.selected_event))).filter(e=>e);L(a),t(r)}catch(t){console.error("Error fetching delegates:",t);let e=t instanceof Error?t.message:"Failed to fetch delegates. Please check your connection and try again.";N(e),b.o.error(e)}finally{g(!1)}})()},[]);let P=e.filter(e=>{let t=k.toLowerCase(),l=e.firstName.toLowerCase().includes(t)||e.lastName.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.organization.toLowerCase().includes(t),r="all"===F||e.selected_event===F;return l&&r}),z=Math.ceil(P.length/6),R=(E-1)*6,M=P.slice(R,R+6),O=e=>{T(e),window.scrollTo({top:0,behavior:"smooth"})},q=async()=>{A(!0);try{let t=new(w());for(let l of"all"===F?e:e.filter(e=>e.selected_event===F)){let e=document.createElement("canvas");e.width=1749,e.height=2481;let r=e.getContext("2d"),a=r.createLinearGradient(0,0,0,e.height);a.addColorStop(0,"#026FB4"),a.addColorStop(1,"#003366"),r.fillStyle=a,r.fillRect(0,0,e.width,e.height);let o=.06*e.width;r.fillStyle="#ffffff",G(r,o,o,e.width-2*o,e.height-2*o,60);let s=document.createElement("img");await new Promise((e,t)=>{let r=()=>{s.removeEventListener("load",r),s.removeEventListener("error",a),e()},a=()=>{s.removeEventListener("load",r),s.removeEventListener("error",a),t(Error("Failed to load image"))};s.addEventListener("load",r),s.addEventListener("error",a),s.crossOrigin="anonymous",s.src=l.profile_picture_url||"/man.svg"});let n=.22*e.width,i=(e.width-n)/2,c=o+.12*e.height;r.strokeStyle="#026FB4",r.lineWidth=16,r.beginPath(),r.arc(i+n/2,c+n/2,n/2+8,0,2*Math.PI),r.stroke(),r.save(),r.beginPath(),r.arc(i+n/2,c+n/2,n/2,0,2*Math.PI),r.clip(),r.drawImage(s,i,c,n,n),r.restore(),r.textAlign="center",r.font="bold 140px Inter",r.fillStyle="#026FB4",r.fillText("".concat(l.firstName," ").concat(l.lastName),e.width/2,c+n+180),r.font="90px Inter",r.fillStyle="#4B5563",r.fillText(l.position,e.width/2,c+n+320),r.font="80px Inter",r.fillText(l.organization,e.width/2,c+n+440);let d=.75*e.width,f=(e.width-d)/2,h=e.height-o-240;r.fillStyle="#026FB4",G(r,f,h,d,140,70),r.font="80px Inter",r.fillStyle="#ffffff",r.fillText(l.selected_event,e.width/2,h+95.2);let m=document.createElement("canvas");m.width=1749,m.height=2481;let x=m.getContext("2d"),g=x.createLinearGradient(0,0,0,m.height);g.addColorStop(0,"#026FB4"),g.addColorStop(1,"#003366"),x.fillStyle=g,x.fillRect(0,0,m.width,m.height),x.fillStyle="#ffffff",G(x,o,o,m.width-2*o,m.height-2*o,60),x.font="bold 120px Inter",x.fillStyle="#026FB4",x.textAlign="center",x.fillText("Scan QR Code",m.width/2,o+240);let u=.35*m.width,p=(m.width-u)/2,v=(m.height-u)/2;x.fillStyle="#026FB4",G(x,p,v,u,u,20),x.font="80px Inter",x.fillStyle="#4B5563",x.fillText("For More Information",m.width/2,v+u+180);let w=await new Promise(t=>{e.toBlob(e=>t(e),"image/png",1)}),y=await new Promise(e=>{m.toBlob(t=>e(t),"image/png",1)});t.file("".concat(l.firstName,"_").concat(l.lastName,"_front.png"),w),t.file("".concat(l.firstName,"_").concat(l.lastName,"_back.png"),y)}let l=await t.generateAsync({type:"blob"}),r=URL.createObjectURL(l),a=document.createElement("a");a.href=r,a.download="".concat("all"===F?"All_Workshops":F,"_Badges.zip"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}catch(e){console.error("Error generating badges:",e),b.o.error("Error generating badges. Please try again.")}finally{A(!1)}};function G(e,t,l,r,a,o){e.beginPath(),e.moveTo(t+o,l),e.lineTo(t+r-o,l),e.quadraticCurveTo(t+r,l,t+r,l+o),e.lineTo(t+r,l+a-o),e.quadraticCurveTo(t+r,l+a,t+r-o,l+a),e.lineTo(t+o,l+a),e.quadraticCurveTo(t,l+a,t,l+a-o),e.lineTo(t,l+o),e.quadraticCurveTo(t,l,t+o,l),e.closePath(),e.fill()}return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Badges"}),(0,r.jsx)(x.F,{})]}),(0,r.jsxs)("div",{className:"container mx-auto p-6",children:[(0,r.jsxs)("div",{className:"h-screen flex flex-col ".concat(_?"no-print":""),style:{backgroundColor:"#F9FAFB"},children:[(0,r.jsxs)("div",{className:"flex-none px-4 py-3 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between shadow-sm",style:{backgroundColor:"#ffffff",borderBottom:"1px solid #E5E7EB"},children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[(0,r.jsxs)("div",{className:"relative flex-1 max-w-md group",children:[(0,r.jsx)(i.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 transition-colors",style:{color:"#6B7280"}}),(0,r.jsx)(o.p,{placeholder:"Search delegates...",className:"pl-8 transition-all duration-200",style:{"--tw-ring-color":"#026FB4","--tw-ring-offset-width":"2px"},value:k,onChange:e=>{C(e.target.value),T(1)}})]}),(0,r.jsxs)(p.l6,{value:F,onValueChange:e=>{S(e),T(1)},children:[(0,r.jsx)(p.bq,{className:"w-full sm:w-[200px] transition-all duration-200",style:{"--tw-ring-color":"#026FB4","--tw-ring-offset-width":"2px"},children:(0,r.jsx)(p.yv,{placeholder:"Filter by workshop"})}),(0,r.jsxs)(p.gC,{style:{backgroundColor:"#ffffff",border:"1px solid #E5E7EB",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[(0,r.jsx)(p.eb,{value:"all",style:{"--hover-bg":"#026FB4","--hover-text":"#ffffff"},children:"All Workshops"}),I.map(e=>(0,r.jsx)(p.eb,{value:e,style:{"--hover-bg":"#026FB4","--hover-text":"#ffffff"},children:e},e))]})]}),(0,r.jsxs)(s.$,{onClick:q,disabled:_,style:{backgroundColor:"#026FB4",color:"#ffffff"},className:"hover:bg-[#0052CC] transition-colors duration-200",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 mr-2"}),_?"Generating...":"Download All Badges"]})]}),(0,r.jsxs)("div",{className:"text-sm px-3 py-1.5 rounded-full border",style:{backgroundColor:"#F9FAFB",color:"#6B7280"},children:["Showing ",M.length," of ",P.length," delegates"]})]}),(0,r.jsxs)("div",{className:"flex-1 px-4 py-3 flex flex-col overflow-auto",children:[l&&(0,r.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#026FB4]"})}),v&&!l&&(0,r.jsx)("div",{className:"text-center py-8 text-red-500",children:v}),!l&&!v&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 auto-rows-fr",children:M.map(e=>(0,r.jsx)(n.Zp,{className:"overflow-hidden group hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:(0,r.jsxs)(n.Wu,{className:"p-5 h-full flex flex-col justify-center relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{background:"linear-gradient(to bottom right, transparent, #F9FAFB)"}}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u(),{href:"/coordinator/badges/".concat(e.id),children:(0,r.jsx)(s.$,{variant:"ghost",size:"icon",style:{backgroundColor:"#026FB4",color:"#ffffff",borderColor:"#ffffff"},className:"absolute -right-1 -top-1 h-9 w-9 rounded-full shadow-sm border-2 hover:bg-[#0052CC] hover:text-white transition-transform duration-200 hover:scale-110",children:(0,r.jsx)(d.A,{className:"h-4.5 w-4.5"})})}),(0,r.jsxs)(u(),{href:"/coordinator/badges/".concat(e.id),className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"relative mb-4 h-24 w-24 overflow-hidden rounded-full shadow-lg group-hover:scale-105 transition-transform duration-300",style:{border:"4px solid #026FB4"},children:(0,r.jsx)(m.default,{src:e.profile_picture_url||"/man.svg",alt:"".concat(e.firstName," ").concat(e.lastName),fill:!0,className:"object-cover"})}),(0,r.jsxs)("h3",{className:"text-xl font-bold line-clamp-1 transition-colors duration-200",style:{color:"#026FB4"},children:[e.firstName," ",e.lastName]}),(0,r.jsx)("p",{className:"text-base line-clamp-1",style:{color:"#4B5563"},children:e.position}),(0,r.jsx)("div",{className:"mt-2 px-3 py-1 rounded-full",style:{backgroundColor:"rgba(2, 111, 180, 0.1)"},children:(0,r.jsx)("p",{className:"text-sm font-medium",style:{color:"#026FB4"},children:e.selected_event})})]})]})]})},e.id))}),z>1&&(0,r.jsxs)("div",{className:"flex-none mt-6 flex items-center justify-center gap-2",children:[(0,r.jsx)(s.$,{variant:"outline",size:"icon",onClick:()=>O(E-1),disabled:1===E,className:"h-8 w-8 transition-colors duration-200",style:{"--hover-bg":"#026FB4","--hover-text":"#ffffff"},children:(0,r.jsx)(f.A,{className:"h-4 w-4"})}),Array.from({length:z},(e,t)=>t+1).map(e=>(0,r.jsx)(s.$,{variant:E===e?"default":"outline",size:"sm",onClick:()=>O(e),className:"h-8 w-8 transition-colors duration-200",style:E===e?{backgroundColor:"#026FB4",color:"#ffffff"}:{"--hover-bg":"#026FB4","--hover-text":"#ffffff"},children:e},e)),(0,r.jsx)(s.$,{variant:"outline",size:"icon",onClick:()=>O(E+1),disabled:E===z,className:"h-8 w-8 transition-colors duration-200",style:{"--hover-bg":"#026FB4","--hover-text":"#ffffff"},children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})]})]})]})]}),_&&(0,r.jsx)("div",{className:"print-only",style:{display:"none"},children:(0,r.jsx)(B,{users:e})})]})]})}},77108:(e,t,l)=>{Promise.resolve().then(l.bind(l,6737))},92981:(e,t,l)=>{"use strict";l.d(t,{G6:()=>d,WG:()=>n,fE:()=>i,gf:()=>o,ve:()=>s,zu:()=>c});let r="access",a="refresh_token",o=()=>localStorage.getItem(r),s=()=>localStorage.getItem(a),n=e=>{localStorage.setItem(r,e)},i=e=>{localStorage.setItem(a,e)},c=()=>{localStorage.removeItem(r),localStorage.removeItem(a)},d=()=>{let e=o();if(!e)return!1;try{let t=JSON.parse(atob(e.split(".")[1])),l=1e3*t.exp;return Date.now()<l}catch(e){return console.error("Error checking token validity:",e),!1}}}},e=>{var t=t=>e(e.s=t);e.O(0,[2848,6671,1478,5364,8698,6874,3063,4358,8146,5074,3280,8441,1684,7358],()=>t(77108)),_N_E=e.O()}]);